{"version":3,"sources":["windowmanager.es6"],"names":[],"mappings":"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","file":"windowmanager.js","sourcesContent":["\"use strict\";\n\n(function ($) {\n    var _ = require(\"underscore\");\n    var cm = require(\"openorange\").classmanager;\n\n    class WindowContainer {\n        //este objeto es el que va a recibir la notificaciones de clase: open y setFocus.\n        //luego para cada ventana se crea un nuevo object de tipo WindowContainer que recibe las notificaciones de instancia de ventana: fieldModifed, title, etc, etc, etc.\n\n        setFocus() {\n            $('ul.tabs').tabs('select_tab', this.tab_id);\n        }\n\n        constructor(wnd) {\n            this.window = wnd;\n            this.windowjson = JSON.parse(JSON.stringify(this.window.__class__.getDescription().form));  //deep clone of the object because I need to add some metadata to it\n            this.window.__container_data__ = {};\n            this.last_tab_id = 0;\n            this.last_tab_id = 0;\n            this.matrix_idx = 0;\n            this.matrix_json_map = {};\n            this.virtual_rows = {};\n            this.pastewindow_id = null;\n            return this;\n        };\n\n        render() {\n\n            var self = this;\n            //console.log(containerElement)\n            var html = '<div class=\"container\"></div>';\n            var w = $(html);\n            w.append(self.createToolBar());\n            this.tab_id = \"tab_window_\" + (WindowContainer.windows.length + 1);\n            WindowContainer.windows.push({window: this.window, element: w, tab_id: this.tab_id});\n            w.append(self.createComponent(this.windowjson));\n            w.append(self.createPasteWindow());\n            //console.log(this.windowjson)\n            this.__element__ = w;\n            this.displayWindow(w)\n        };\n\n        displayWindow(windowElement) {\n            var tab = $('<li class=\"tab col s3\"><a href=\"#' + this.tab_id + '\">' + this.window.getTitle() + '</a></li>');\n            $('ul.tabs.workspace').append(tab);\n            windowElement.attr('id', this.tab_id);\n            $('#workspace').append(windowElement);\n            $('ul.tabs').tabs();\n            //$('.modal-trigger').leanModal();\n            windowElement.find('.datepicker').pickadate(WindowContainer.datePickerOptions);\n            //$('input.editor[timeeditor=true]').mask('00:00:00');\n            if (this.window.getRecord() != null) this.bindRecordToWindow(this.window.getRecord());\n            this.window.addListener(this);\n        };\n\n        createToolBar() {\n            var self = this;\n            var html = '<div class=\"row\">';\n            html += '<a class=\"btn waves-effect waves-light\" action=\"save\"><i class=\"mdi\">done</i></a>';\n            html += '<a class=\"btn waves-effect waves-light\" action=\"print\"><i class=\"mdi\">print</i></a>';\n            for (let i = 0; i < self.window.__class__.getDescription().actions.length; i++) {\n                let action = self.window.__class__.getDescription().actions[i]\n                html += `<a class=\"btn waves-effect waves-light\" action=\"${action.methodname}\">${action.label}</a>`;\n            }\n\n            html += '</div>';\n            var res = $(html);\n            //res.find(\"a\").click(function (event) {self.save(event)});\n            res.find(\"a[action=save]\").click(this.save.bind(this));\n            res.find(\"a[action=print]\").click(this.print.bind(this));\n            for (let i = 0; i < self.window.__class__.getDescription().actions.length; i++) {\n                let action = self.window.__class__.getDescription().actions[i];\n                let params = {self: self, methodname: action.methodname}\n                res.find(`a[action=${action.methodname}]`).click(self.actionClicked.bind(params));\n            }\n            return res;\n        };\n\n        setWindowTitle(title) {\n            $(\"a[href='#\" + this.tab_id + \"']\").html(title)\n        };\n\n        createComponent(json) {\n            var self = this;\n            if ('columns' in json) return self.createEmptyMatrix(json);\n            if ('field' in json) return self.createFieldComponent(json);\n            if ('type' in json && json.type == 'tabs') return self.createTabsComponent(json);\n            if ('type' in json && json.type == 'column') return self.createColumnComponent(json);\n            if ('type' in json && json.type == 'line') return self.createLineComponent(json);\n            if ('content' in json) return self.createComponent(json.content);\n            if (json instanceof Array) {\n                var container = $('<div class=\"container\"></div>');\n                _(json).forEach(function (jcomponent) {\n                    container.append(self.createComponent(jcomponent))\n                });\n                json.__element__ = container;\n                return container;\n            }\n        };\n\n\n        createColumnComponent(json) {\n            var self = this;\n            var component = $('<div class=\"row\"></div>');\n            _(json.content).forEach(function (child_component_json) {\n                var component_row = $('<div class=\"row\"></div>');\n                var component_col = $('<div class=\"col s12\"></div>');\n                var child_component = self.createComponent(child_component_json);\n                component_col.append(child_component)\n                component_row.append(component_col)\n                component.append(component_row);\n            });\n            json.__element__ = component;\n            return component;\n        };\n\n        createLineComponent(json) {\n            var self = this;\n            var component = $('<div class=\"row\"></div>');\n            _(json.content).forEach(function (child_component_json) {\n                var child_component = self.createComponent(child_component_json);\n                component.append(child_component);\n            });\n            json.__element__ = component;\n            return component;\n        };\n\n        createTabsComponent(json) {\n            var self = this;\n            var component = $('<div class=\"row\"></div>');\n            var tabsHeaderContainer = $('<div class=\"col s12\"></div>');\n            var tabsHeader = $('<ul class=\"tabs\"></ul>');\n            tabsHeaderContainer.append(tabsHeader);\n            component.append(tabsHeaderContainer);\n            _(json.pages).forEach(function (jpage) {\n                var label = jpage.label;\n                self.last_tab_id += 1;\n                var tab_id = self.tab_id + \"_\" + self.last_tab_id;\n                var headerButton = $('<li class=\"tab col s3\"><a href=\"#' + tab_id + '\">' + label + '</a></li>');\n                tabsHeader.append(headerButton);\n                var page = self.createComponent(jpage, {id: tab_id});\n                page.attr('id', tab_id);\n                component.append(page);\n            });\n            json.__element__ = component;\n            return component;\n        };\n\n\n        createFieldComponent(json) {\n            var self = this;\n            var editor;\n            var grid_cols = 4;\n            var headerInput = true;\n            var rclass = this.window.getRecordClass();\n            var field = rclass.__description__.fields[json.field];\n            if (!field) throw new Error(\"Field \" + json.field + \" not found in record\");\n            if ('editor' in json) {\n                editor = json.editor;\n            } else {\n                switch (field.type) {\n                    case 'string':\n                        editor = 'string';\n                        break;\n                    case 'integer':\n                        editor = 'integer';\n                        break;\n                    case 'boolean':\n                        editor = 'checkbox';\n                        break;\n                    case 'date':\n                        editor = 'date';\n                        break;\n                    case 'time':\n                        editor = 'time';\n                        break;\n                    case 'detail':\n                        editor = 'matrix';\n                        grid_cols = 12;\n                        headerInput = false;\n                        break;\n                }\n            }\n            var component = $('<div class=\"input-field col s' + grid_cols + '\"></div>');\n            var labelComponent = null;\n            var editorElement = self[editor](json, \"oomaster\");\n            var editors = editorElement;\n            var pasteWindowComponent = null;\n            if (headerInput) {\n                switch (editor) {\n                    case 'checkbox':\n                        editors = editorElement.find(\"input\");\n                        editors.click(self.beforeEdit.bind(self));  //en el checkbox, el beforeEdit llama al afterEdit (esto es porque no siempre recibe eventos de focus -a veces se llama una sola vez y luego nunca mas-\n                        break;\n                    case 'radiobutton':\n                        editors = editorElement.find(\"input\");\n                        editors.click(self.beforeEdit.bind(self));\n                        editors.change(self.afterEdit.bind(self));\n                        break;\n                    case 'combobox':\n                        labelComponent = $('<label>' + (json.label ? json.label : json.field) + '</label>');\n                        editors.change(self.beforeEdit.bind(self)); //en el combobox, el beforeEdit llama al afterEdit (esto es porque no recibe eventos ni de click ni de focus\n                        break;\n                    case 'date':\n                        labelComponent = $('<label>' + (json.label ? json.label : json.field) + '</label>');\n                        //editors.focus(self.beforeEdit.bind(self));\n                        editors.change(self.beforeEdit.bind(self));\n                        break;\n                    default:\n                        labelComponent = $('<label>' + (json.label ? json.label : json.field) + '</label>');\n                        editors.focus(self.beforeEdit.bind(self));\n                        editors.change(self.afterEdit.bind(self));\n                        break;\n                }\n            }\n            if (json.pastewindow) {\n                pasteWindowComponent = $('<i class=\"mdi prefix\">search</i>')\n                var params = {self: self, field: field, detailname: null, rownr: null, json: json, editor: editors};\n                pasteWindowComponent.click(self.openPasteWindow.bind(params));\n            }\n            if (pasteWindowComponent) component.append(pasteWindowComponent);\n            component.append(editorElement);\n            if (labelComponent) component.append(labelComponent);\n            json.__element__ = editors;\n            return component;\n        };\n\n        createMatrixComponent(json, cls, detailname, rownr, rowfield) {\n            var self = this;\n            var editor;\n            if ('editor' in json) {\n                editor = json.editor;\n            } else {\n                switch (rowfield.type) {\n                    case 'string':\n                        editor = 'string';\n                        break;\n                    case 'integer':\n                        editor = 'integer';\n                        break;\n                    case 'date':\n                        editor = 'date';\n                        break;\n                    case 'boolean':\n                        editor = 'checkbox';\n                        break;\n                }\n            }\n            var editorElement = self[editor](json, cls, rowfield);\n            var editors = editorElement;\n            var bind_params = {self: self, json: json, detailname: detailname, rowfield: rowfield};\n            switch (editor) {\n                case 'checkbox':\n                    editors = editorElement.find(\"input\");\n                    editors.click(self.beforeEditRow.bind(bind_params));\n                    break;\n                case 'combobox':\n                    editors.change(self.beforeEditRow.bind(bind_params));\n                    break;\n                case 'date':\n                    editors.change(self.beforeEditRow.bind(bind_params));\n                    break;\n                default:\n                    editors.focus(self.beforeEditRow.bind(bind_params));\n                    editors.change(self.afterEditRow.bind(bind_params));\n                    break;\n            }\n            var component = editors;\n            if (json.pastewindow) {\n                component = $('<div class=\"input-field\"></div>');\n                var pasteWindowComponent = $('<i class=\"mdi prefix\">search</i>');\n                component.append(pasteWindowComponent);\n                var params = {\n                    self: self,\n                    detailname: detailname,\n                    field: rowfield,\n                    rownr: rownr,\n                    json: json,\n                    editor: editors\n                };\n                pasteWindowComponent.click(self.openPasteWindow.bind(params));\n                component.append(editors)\n            }\n            json.__element__ = editors;\n            return component;\n        };\n\n\n        async save() {\n            let res = await this.window.save()\n            return res;\n        };\n\n        print() {\n            this.window.print()\n        };\n\n        string(json, cls, field) {\n            var self = this;\n            var value = field != null ? field.getValue() : '';\n            if (field != null && field.type == 'date' && value != null) value = value.format(\"YYYY-MM-DD\");\n            if (value == null) value = '';\n            var html = '<input value=\"' + value + '\" type=\"text\" name=\"' + json.field + '\" class=\"editor ' + cls + ' validate\">';\n            var res = $(html);\n            return res;\n        };\n\n        time(json, cls, field) {\n            var res = this.string(json, cls, field);\n            res.attr('timeeditor', true);\n            //res.attr('data-mask', '00:00:00')\n            res.mask('09:00:00');\n            return res;\n        };\n\n        integer(json, cls, field) {\n            var self = this;\n            var value = field != null ? field.getValue() : '';\n            if (value == null) value = '';\n            var html = '<input value=\"' + value + '\" type=\"number\" name=\"' + json.field + '\" class=\"editor ' + cls + ' validate\">';\n            var res = $(html);\n            return res;\n        };\n\n        date(json, cls, field) {\n            var self = this;\n            var value = field != null ? field.getSQLValue() : '';\n            if (value == null) value = '';\n            var html = '<input data-value=\"' + value + '\" type=\"date\" name=\"' + json.field + '\" class=\"editor datepicker ' + cls + ' validate\" datepicker=\"true\">';\n            var res = $(html);\n            return res;\n        };\n\n        checkbox(json, cls, field) {\n            var self = this;\n            var value = field != null ? field.getValue() : '';\n            if (value == null) value = '';\n            var checked = value == '' ? '' : 'checked =\"checked\"';\n            var element_id = \"CHECKBOX_\" + WindowContainer.element_ids++;\n            var html = '<p><input ' + checked + ' type=\"checkbox\" name=\"' + json.field + '\" class=\"editor ' + cls + ' validate\" id=\"' + element_id + '\">';\n            var label = '';\n            if (field == null) { //esto significa que me llamaron desde el header y no desde un matrix\n                label = (json.label ? json.label : json.field)\n            }\n            html += '<label for=\"' + element_id + '\">' + label + '</label></p>';\n            var res = $(html);\n            return res;\n        };\n\n        combobox(json, cls, field) {\n            var self = this;\n            var value = field != null ? field.getValue() : '';\n            if (value == null) value = '';\n            var html = '<select value=\"' + value + '\" type=\"text\" name=\"' + json.field + '\" class=\"editor ' + cls + ' validate\">';\n            var selected = (value == '' || value == null) ? 'SELECTED' : '';\n            html += '<option value=\"\" ' + selected + '></option>';\n            for (var i = 0; i < json.options.length; i++) {\n                var option = json.options[i];\n                var selected = (value == ('' + option.value)) ? 'SELECTED' : '';  // (''+option.value) es porque sino '' == 0 -> TRUE\n                html += '<option value=\"' + option.value + '\" ' + selected + '>' + option.label + '</option>'\n            }\n            html += '</select>';\n            var res = $(html);\n            return res;\n        };\n\n        radiobutton(json, cls, field) {\n            var self = this;\n            var value = field != null ? field.getValue() : '';\n            if (value == null) value = '';\n            var html = '';\n            for (var i = 0; i < json.options.length; i++) {\n                var option = json.options[i];\n                var element_id = \"RADIO_\" + WindowContainer.element_ids++;\n                html += '<p><input value=\"' + option.value + '\" type=\"radio\" name=\"' + json.field + '\" class=\"editor ' + cls + ' validate\" id=\"' + element_id + '\">';\n                html += '<label for=\"' + element_id + '\">' + option.label + '</label></p>';\n            }\n            var res = $(html)//.find(\"input\");\n            return res;\n        };\n        ;\n\n        beforeEdit(event) {\n            var self = this;\n            if (self.window.getRecord() == null) return;\n            var target = $(event.currentTarget);\n            if ('__block_event__' in event.currentTarget && event.currentTarget.__block_event__) return;\n            var readonly = !Boolean(self.window.beforeEdit(event.currentTarget.name));\n            if (event.currentTarget.nodeName == 'INPUT' && $(event.currentTarget).attr('type') == 'radio') {\n                if (readonly) {\n                    target.parent().parent().find(\"input[value=\" + self.window.getRecord()[event.currentTarget.name] + \"]\")[0].checked = true;\n                }\n            } else if (event.currentTarget.nodeName == 'INPUT' && $(event.currentTarget).attr('type') == 'checkbox') {\n                if (readonly) {\n                    target[0].checked = Boolean(self.window.getRecord()[event.currentTarget.name]);\n                } else {\n                    self.afterEdit(event);\n                }\n            }\n            else if (event.currentTarget.nodeName == 'SELECT') {\n                if (readonly) {\n                    target.val(self.window.getRecord()[event.currentTarget.name]);\n                    target.material_select();\n                } else {\n                    self.afterEdit(event)\n                }\n            } else if (event.currentTarget.nodeName == 'INPUT' && target.attr('datepicker') == 'true') {\n                if (readonly) {\n                    target.pickadate('picker').close();\n                    var d = null;\n                    var value = self.window.getRecord()[event.currentTarget.name];\n                    if (value != null && value != '') {\n                        d = moment(value, \"YYYY-MM-DD\").toDate()\n                    }\n                    event.currentTarget.__block_event__ = true;\n                    target.pickadate('picker').set('select', d);\n                    event.currentTarget.__block_event__ = false;\n                } else {\n                    self.afterEdit(event)\n                }\n            } else {\n                target.attr(\"readonly\", readonly);\n            }\n        };\n\n        beforeEditRow(event) {\n            console.log(\"en before edit row\");\n            if ('__block_event__' in event.currentTarget && event.currentTarget.__block_event__) return;\n            var params = this;\n            var self = params.self;\n            var target = $(event.currentTarget);\n            target.css('border-bottom', 'none');\n            target.css('box-shadow', 'none');\n            var readonly = null;\n            var rownr = target.closest(\"tr\").attr(\"rownr\");\n            if (rownr == 'null') { //virtual_row\n                //si la fila anterior esta toda vacia, entonces no agrego otra nueva fila\n                var tr = target.closest(\"tr\");\n                var tr_index = tr.index();\n                if (tr_index == 0 || !self.window.getRecord()[params.detailname][tr_index - 1].isEmpty()) {\n                    var newrow = self.window.getRecord()[params.detailname].newRow();\n\n                    var addedRow = self.virtual_rows[params.detailname];\n                    var tbody = target.closest(\"tbody\");\n                    addedRow.__window_container_avoid_insert__ = tbody.attr('matrix_idx');\n                    self.window.getRecord()[params.detailname].push(self.virtual_rows[params.detailname]);\n                    delete addedRow.__window_container_avoid_insert__;\n                    tr.attr('rownr', addedRow.rowNr); //esto va antes del push para que durante el push toda este tr del table se complete con los valores que pudiera tener o que se seteen en el defaults del row (todo eso se corre adentro del push)\n                    _(addedRow.fieldNames()).forEach(function (fn) {\n                        var value = addedRow[fn];\n                        if (value != null) {\n                            self.update({\n                                type: 'field', action: 'modified', data: {\n                                    record: self.window.getRecord(),\n                                    field: self.window.getRecord().details(params.detailname),\n                                    row: addedRow,\n                                    rowfield: addedRow.fields(fn),\n                                    oldvalue: value\n                                }\n                            });\n                        }\n                    });\n                    self.virtual_rows[params.detailname] = self.window.getRecord()[params.detailname].newRow();\n                    var json = _(self.matrix_json_map[params.detailname]).find(function (json) {\n                        return json.__element__.find(\"tbody\").attr(\"matrix_idx\") == tbody.attr(\"matrix_idx\")\n                    });\n                    self.insertMatrixRow(self.window.getRecord(), json, self.virtual_rows[params.detailname], tbody)\n                } else {\n                    readonly = true;\n                }\n            }\n            if (readonly == null) readonly = !Boolean(self.window.beforeEditRow(this.detailname, this.rowfield.name, rownr));\n            if (event.currentTarget.nodeName == 'INPUT' && $(event.currentTarget).attr('type') == 'checkbox') {\n                if (readonly) {\n                    target[0].checked = Boolean(self.window.getRecord()[this.detailname][rownr][this.rowfield.name]);\n                } else {\n                    self.afterEditRow.call(params, event);\n                }\n            } else if (event.currentTarget.nodeName == 'SELECT') {\n                if (readonly) {\n                    target.val(self.window.getRecord()[this.detailname][rownr][this.rowfield.name]);\n                    target.material_select();\n                } else {\n                    self.afterEditRow.call(params, event);\n                }\n            }\n            if (event.currentTarget.nodeName == 'INPUT' && target.attr('datepicker') == 'true') {\n                if (readonly) {\n                    target.pickadate('picker').close();\n                    var d = null;\n                    var value = self.window.getRecord()[this.detailname][rownr][this.rowfield.name];\n                    if (value != null && value != '') {\n                        d = moment(value, \"YYYY-MM-DD\").toDate()\n                    }\n                    event.currentTarget.__block_event__ = true;\n                    target.pickadate('picker').set('select', d);\n                    event.currentTarget.__block_event__ = false;\n                } else {\n                    self.afterEditRow.call(params, event)\n                }\n            } else {\n                target.attr(\"readonly\", readonly);\n            }\n        };\n\n        afterEdit(event) {\n            var self = this;\n            console.log(\"afteredit\");\n            var value = event.currentTarget.value;\n            if (event.currentTarget.nodeName == 'INPUT' && $(event.currentTarget).attr('type') == 'checkbox') {\n                var ftype = self.window.getRecord().fields(event.currentTarget.name).type;\n                if (ftype == 'boolean') {\n                    value = event.currentTarget.checked;\n                } else {\n                    value = event.currentTarget.checked ? 1 : 0;\n                }\n            } else if (event.currentTarget.nodeName == 'INPUT' && $(event.currentTarget).attr('datepicker') == 'true') {\n                value = $(event.currentTarget).pickadate('picker').get('select', 'yyyy-mm-dd');\n            }\n            //console.log(\"afteredit\", self, value)\n            self.window.call_afterEdit(event.currentTarget.name, value)\n        };\n\n        afterEditRow(event) {\n            console.log(\"en after edit row\");\n            var params = this;\n            var self = params.self;\n            var target = $(event.currentTarget);\n            target.css('border-bottom', 'none');\n            target.css('box-shadow', 'none');\n            var rownr = target.closest(\"tr\").attr(\"rownr\");\n            var value = target.val();\n            if (event.currentTarget.nodeName == 'INPUT' && target.attr('type') == 'checkbox') {\n                var ftype = self.window.getRecord().details(params.detailname).getRowClass().__description__.fields[params.rowfield.name].type;\n                if (ftype == 'boolean') {\n                    value = event.currentTarget.checked;\n                } else {\n                    value = event.currentTarget.checked ? 1 : 0;\n                }\n            } else if (event.currentTarget.nodeName == 'INPUT' && target.attr('datepicker') == 'true') {\n                value = target.pickadate('picker').get('select', 'yyyy-mm-dd');\n            }\n            self.window.afterEditRow(params.detailname, params.rowfield.name, rownr, value);\n        };\n\n\n        update(event) {\n            var self = this;\n            switch (event.type) {\n                case \"window\":\n                    //el action 'open' es en event de clase y no entra por aca. ver final de este archivo.\n                    if (event.action == 'setFocus') self.setFocus()\n                case \"record\":\n                    if (event.action == 'replaced') self.bindRecordToWindow(event.data);\n                    break;\n                case \"field\":\n                    //console.log(event)\n                    if (event.action == 'modified') {\n                        var field = event.data.field;\n                        if (field.type != \"detail\") {\n                            self.setEditorValue(field.name, field.type, field.getValue());\n                            Materialize.updateTextFields();\n                        } else {\n                            console.log(\"row: \" + event.data.rowfield.name)\n                            var rowNr = event.data.row.rowNr;\n                            if (event.data.rowfield.name == 'rowNr') rowNr = event.data.oldvalue; //si lo que cambio fue el rowNr del row entonces uso el valor anterior a la modificacion para identificar el la fila a modificar\n                            console.log(event.data.field.name, rowNr, event.data.rowfield.name, event.data.rowfield.type, event.data.rowfield.getValue())\n                            self.setRowEditorValue(event.data.field.name, rowNr, event.data.rowfield.name, event.data.rowfield.type, event.data.rowfield.getValue());\n                            Materialize.updateTextFields();\n                        }\n                    } else if (event.action == 'row inserted') {\n                        var detail = event.data.detail;\n                        if (detail.name in this.matrix_json_map) {\n                            _(this.matrix_json_map[detail.name]).forEach(function (matrixjson) {\n                                var tbody = matrixjson.__element__.find(\"tbody[matrix_idx]\");\n                                self.insertMatrixRow(event.data.record, matrixjson, event.data.row, tbody);\n                            })\n\n                        }\n                    } else if (event.action == 'detail cleared') {\n                        var detail = event.data.detail;\n                        if (detail.name in this.matrix_json_map) {\n                            _(this.matrix_json_map[detail.name]).forEach(function (matrixjson) {\n                                var tbody = matrixjson.__element__.find(\"tbody\");\n                                tbody.find(\"tr\").not('[rowNr=null]').remove();\n                            })\n                        }\n                    }\n                    break;\n                case \"title\":\n                    if (event.action == \"modified\") {\n                        self.setWindowTitle(event.data)\n                    }\n                    break;\n            }\n        }\n\n        insertMatrixRow(record, json, row, tbodyElement, position) {\n            if (row.__window_container_avoid_insert__ == tbodyElement.attr(\"matrix_idx\")) {\n                //self.insertMatrixRow(record, json, self.virtual_rows[json.field], tbody)\n                return;\n            }\n            var self = this;\n            var tbody = tbodyElement;\n            var tr = $('<tr rownr=\"' + row.rowNr + '\"></tr>');\n\n            _(json.columns).forEach(function (jcol) {\n                var td = $('<td></td>');\n                var component = self.createMatrixComponent(jcol, 'oodetail', json.field, row.rowNr, row.fields(jcol.field));\n                var readonly = !record.fieldIsEditable(json.field, jcol.field, row.rowNr);\n                if (readonly) component.attr('readonly', readonly);\n                component.css('border-bottom', 'none');\n                component.css('box-shadow', 'none');\n                td.append(component);\n                tr.append(td)\n            });\n\n            var trs = tbody.children(\"tr\");\n            var hasVirtualRow = (trs.length > 0 && trs.last().attr('rownr') == 'null');\n            var rows_count = trs.length;\n            if (hasVirtualRow) rows_count -= 1;\n            if (row.rowNr >= rows_count || row.rowNr == null) { //row.rowNr == null -> virtual_row\n                if (hasVirtualRow) {\n                    trs.last().before(tr);\n                } else {\n                    tbody.append(tr);\n                }\n            } else {\n                var next_tr = null;\n                for (var i = rows_count - 1; i >= row.rowNr; i--) {\n                    next_tr = tbody.children('tr[rownr=' + i + ']');\n                    next_tr.attr('rownr', i + 1)\n                }\n                next_tr.before(tr)\n            }\n            tr.find(\"select\").material_select();\n            tr.find(\"input[datepicker=true]\").pickadate(WindowContainer.datePickerOptions);\n            return tr;\n        };\n\n        setEditorValue(fname, ftype, value) {\n            var elements = this.__element__.find('.editor.oomaster[name=' + fname + ']');\n            for (var i = 0; i < elements.length; i++) {\n                var element = elements[i];\n                var e = $(element);\n                if (element.nodeName == 'SELECT') {\n                    e.val(value);\n                    e.material_select();\n                } else if (element.nodeName == 'INPUT' && e.attr('type') == 'radio') {\n                    element.checked = (value == e.val());\n                } else if (element.nodeName == 'INPUT' && e.attr('type') == 'checkbox') {\n                    element.checked = (value != null && value != '' && value != 0 && value != false);\n                } else if (element.nodeName == 'INPUT' && e.attr('datepicker') == 'true') {\n                    var d = null;\n                    if (value != null && value != '') {\n                        d = moment(value, \"YYYY-MM-DD\").toDate()\n                    }\n                    element.__block_event__ = true;\n                    e.pickadate('picker').set('select', d);\n                    element.__block_event__ = false;\n                } else {\n                    if (ftype == 'date' && value != null) {\n                        e.val(value.format(\"YYYY-MM-DD\"))\n                    } else {\n                        e.val(value)\n                    }\n                }\n            }\n        };\n\n        setRowEditorValue(detailname, rowNr, rowfieldname, rowfieldtype, value) {\n            var elements = this.__element__.find('table[name=' + detailname + '] tr[rownr=' + rowNr + '] .editor.oodetail[name=' + rowfieldname + ']');\n            for (var i = 0; i < elements.length; i++) {\n                var element = elements[i];\n                var e = $(element);\n                if (elements[i].nodeName == 'SELECT') {\n                    e.val(value);\n                    $(elements[i]).material_select();\n                } else if (element.nodeName == 'INPUT' && e.attr('type') == 'checkbox') {\n                    element.checked = (value != null && value != '' && value != 0 && value != false);\n                } else if (element.nodeName == 'INPUT' && e.attr('datepicker') == 'true') {\n                    var d = null;\n                    if (value != null && value != '') {\n                        //d = moment(value, \"YYYY-MM-DD\").toDate()\n                        d = value.toDate()\n                    }\n                    //console.log(rowfield)\n                    //console.log(\"a\", d,value.constructor)\n                    element.__block_event__ = true;\n                    e.pickadate('picker').set('select', d);\n                    element.__block_event__ = false;\n                } else {\n                    if (rowfieldtype == 'date' && value != null) {\n                        e.val(value.format(\"YYYY-MM-DD\"))\n                    } else {\n                        e.val(value)\n                    }\n                }\n\n            }\n        };\n\n        setEditorReadOnly(field, readonly) {\n            this.__element__.find('.editor.oomaster[name=' + field.name + ']').attr('readonly', readonly)\n        };\n\n        createEmptyMatrix(json) {\n            var self = this;\n            var table = $('<table name=\"' + json.field + '\" class=\"bordered oodetail striped\"></table>');\n            var thead = $(\"<thead></thead>\");\n            var colHeaderRow = $(\"<tr></tr>\");\n            thead.append(colHeaderRow);\n            _(json.columns).forEach(function (col) {\n                var label = col.label ? col.label : col.field;\n                var colHeader = $(\"<th>\" + col.field + \"</ht>\");\n                colHeaderRow.append(colHeader)\n            });\n            table.append(thead);\n            var tbody = $('<tbody></tbody>');\n            self.matrix_idx += 1;\n            tbody.attr('matrix_idx', self.matrix_idx);\n            table.append(tbody);\n            json.__element__ = table;\n            if (!(json.field in this.matrix_json_map)) this.matrix_json_map[json.field] = [];\n            this.matrix_json_map[json.field].push(json);\n            return table;\n        };\n\n        bindRecordToComponent(record, jcomponent) {\n            var self = this;\n            if (jcomponent instanceof Array) {\n                _(jcomponent).forEach(function (json) {\n                    if ('columns' in json) {\n                        var tbody = json.__element__.find(\"tbody\");\n                        tbody.html('');\n                        _(record[json.field]).forEach(function (row) {\n                            self.insertMatrixRow(record, json, row, tbody)\n                        });\n                        self.insertMatrixRow(record, json, self.virtual_rows[json.field], tbody)\n                    } else if ('field' in json) {\n                        var field = record.fields(json.field);\n                        self.setEditorValue(field.name, field.type, field.getValue());\n                        self.setEditorReadOnly(field, !record.fieldIsEditable(json.field))\n                    } else {\n                        var jcontent = null;\n                        if (json.pages instanceof Array) jcontent = json.pages;\n                        else if (json.content instanceof Array) jcontent = json.content;\n                        self.bindRecordToComponent(record, jcontent);\n                    }\n                })\n            }\n        };\n\n        bindRecordToWindow(record) {\n            var self = this;\n            _(record.detailNames()).forEach(function (dn) {\n                var vt = record[dn].newRow();\n                //vt.rowNr =\n                self.virtual_rows[dn] = vt;\n            });\n            self.bindRecordToComponent(record, self.windowjson);\n            self.setWindowTitle(this.window.getTitle());\n            Materialize.updateTextFields();\n            self.__element__.find(\"select\").material_select()\n        };\n\n        createPasteWindow() {\n            var self = this;\n            self.pastewindow_id = \"PASTEWINDOW_\" + WindowContainer.element_ids++;\n            var html = '';\n            html += '<div id=\"' + self.pastewindow_id + '\" class=\"modal modal-fixed-footer pastewindow\" style=\"z-index: 1003; display: none; opacity: 0; transform: scaleX(0.7); top: 317.636px;\">';\n            html += '  <div class=\"modal-content\">';\n            //html += '    <table class=\"recordlist\"><thead></thead><tbody></tbody></table>';\n            html += '    <div class=\"pastewindow_grid\" style=\"width:600px;height:200px;\"></div>';\n            html += '  </div>';\n            html += '  <div class=\"modal-footer green lighten-4\">';\n            html += '    <a href=\"#\" class=\"waves-effect waves-red btn-flat modal-action modal-close\">Disagree</a>';\n            html += '    <a href=\"#\" class=\"waves-effect waves-green btn-flat modal-action modal-close\">Agree</a>';\n            html += '  </div>';\n            html += '</div>';\n            var pastewindow = $(html);\n            return pastewindow;\n        };\n\n        openPasteWindow(event) {\n            var params = this;\n            var self = params.self;\n            var field = params.field;\n            var fieldjson = params.json;\n            var pw = cm.getClass(fieldjson.pastewindow);\n            var pwelement = self.__element__.find(\".pastewindow\");\n            var recordClass = cm.getClass(pw.__description__.recordClass);\n            let columns = pw.__description__.columns;\n            var readonly = null;\n            if (params.detailname == null) {\n                readonly = !Boolean(self.window.beforeEdit(fieldjson.field));\n            } else {\n                readonly = !Boolean(self.window.beforeEditRow(params.detailname, fieldjson.field, params.rownr));\n            }\n            if (readonly) return;\n\n\n            let generateColumns = function generateColumns() {\n                let self = this;\n                grid_columns = [];\n                for (let i = 0; i < columns.length; i++) {\n                    let col = columns[i];\n                    grid_columns.push({id: col.field, name: col.field, field: col.field, sortable: true})\n                }\n                return grid_columns;\n            }\n\n            //var recordClass = self.listwindow.getRecordClass();\n            //var columns = self.listwindow.__class__.__description__.columns;\n\n            var grid;\n            var loader = new Slick.Data.RemoteModel(recordClass);\n            var options = {\n                enableCellNavigation: true,\n                enableColumnReorder: false,\n                //showHeaderRow: true,\n\n            };\n\n            let grid_columns = generateColumns();\n            console.log(\"pwelement1\", pwelement)\n            grid = new Slick.Grid(pwelement.find(\".pastewindow_grid\"), loader.data, grid_columns, options);\n            grid.onClick.subscribe(function (e, args) {\n                var item = args.item;\n                console.log(\"PWELEMENT2\", pwelement)\n                var pasteparams = {\n                    self: self,\n                    detailname: params.detailname,\n                    rownr: params.rownr,\n                    field: field,\n                    fieldjson: fieldjson,\n                    pastewindow: pw,\n                    pastewindowelement: pwelement,\n                    editor: params.editor,\n                    record: args.grid.getData()[args.row]\n                };\n\n                //args.grid.getData()[args.row]\n\n                self.recordSelectedInPasteWindow(pasteparams)\n            });\n            grid.onViewportChanged.subscribe(function (e, args) {\n                var vp = grid.getViewport();\n                loader.ensureData(vp.top, vp.bottom);\n            });\n            loader.onDataLoaded.subscribe(function (e, args) {\n                for (var i = args.from; i <= args.to; i++) {\n                    grid.invalidateRow(i);\n                }\n                grid.updateRowCount();\n                grid.render();\n                //loadingIndicator.fadeOut();\n            });\n\n\n            grid.onSort.subscribe(function (e, args) {\n                loader.setSort(args.sortCol.field, args.sortAsc ? 1 : -1);\n                var vp = grid.getViewport();\n                loader.ensureData(vp.top, vp.bottom);\n            });\n            grid.onViewportChanged.notify();\n            pwelement.openModal();\n        };\n\n        recordSelectedInPasteWindow(params) {\n            //var params = this;\n            var self = this;\n            params.pastewindowelement.closeModal()\n            var readonly = null;\n            if (params.detailname == null) {\n                readonly = !Boolean(self.window.beforeEdit(params.fieldjson.field));\n            } else {\n                readonly = !Boolean(self.window.beforeEditRow(params.detailname, params.fieldjson.field, params.rownr));\n            }\n            if (readonly) return;\n            var event = {target: params.editor[0], currentTarget: params.editor[0]};\n            if (params.detailname == null) {\n                self.setEditorValue(params.fieldjson.field, params.field.type, params.record[params.pastewindow.__description__.pastefieldname])\n                self.afterEdit(event)\n            } else {\n                console.log(params.detailname, params.rownr, params.fieldjson.field, params.field.type, params.record[params.pastewindow.__description__.pastefieldname])\n                self.setRowEditorValue(params.detailname, params.rownr, params.fieldjson.field, params.field.type, params.record[params.pastewindow.__description__.pastefieldname])\n                var bind_params = {\n                    self: self,\n                    json: params.fieldjson,\n                    detailname: params.detailname,\n                    rowfield: params.field\n                };   //self.window.getRecord().details(params.detailname)[params.rownr].fields(params.fieldjson.name)\n                self.afterEditRow.call(bind_params, event)\n            }\n        };\n\n        async actionClicked(event) {\n            let params = this;\n            let self = params.self;\n            let methodname = params.methodname;\n            await self.window.call_action(methodname);\n        }\n    }\n\n    WindowContainer.windows = [];\n    WindowContainer.element_ids = 1;\n    WindowContainer.datePickerOptions = {\n        closeOnSelect: true,\n        selectMonths: true, // Creates a dropdown to control month\n        selectYears: 15, // Creates a dropdown of 15 years to control year\n        formatSubmit: \"yyyy-mm-dd\",\n        format: \"dd-mm-yyyy\",\n        onSet: function (arg) {\n            if ('select' in arg) { //prevent closing on selecting month/year\n                this.close();\n            }\n        }\n    };\n    $(document).ready(function () {\n        console.log(\"en docready windowmanager\")\n        cm.getClass(\"Embedded_Window\").addClassListener({\n            update: function (event) {\n                if (event.type =='window' && event.action =='open') {\n                    let wm = new WindowContainer(event.data)\n                    wm.render()\n                }\n            }\n        });\n    })\n    window.oo.ui.windowmanager = WindowContainer;\n\n    //$.extend(true, window.oo.ui, {windowmanager: WindowContainer})\n    //window.WindowManager = WindowContainer; //para hacer global la variable WindowManager\n})(jQuery);\n"],"sourceRoot":"/source/"}