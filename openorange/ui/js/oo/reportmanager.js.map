{"version":3,"sources":["../../../../node_modules/openorange/ui/js/oo/reportmanager.es6"],"names":[],"mappings":"AAAA;;;;;;AACA,CAAC,UAAU,CAAV,EAAa;AACV,QAAI,IAAI,QAAQ,YAAR,CAAR;AACA,QAAI,KAAK,QAAQ,YAAR,CAAT;AACA,QAAI,KAAK,GAAG,YAAZ;;AAHU,QAKJ,eALI;AAAA;AAAA;AAAA,uCAOY,EAPZ,EAOgB;AAClB,uBAAO,QAAQ,YAAR,EAAsB,YAAtB,CAAmC,QAAnC,CAA4C,iBAA5C,EAA+D,UAA/D,CAA0E,EAA1E,CAAP;AACH;AATK;;AAWN,iCAAY,MAAZ,EAAoB;AAAA;;AAChB,iBAAK,MAAL,GAAc,MAAd;;AAEA,iBAAK,MAAL,CAAY,WAAZ,CAAwB,IAAxB;AACA,mBAAO,IAAP;AACH;;AAhBK;AAAA;AAAA,qCAkBG,MAlBH,EAkBW;AACb,kBAAE,SAAF,EAAa,IAAb,CAAkB,YAAlB,EAAgC,KAAK,MAArC;AACH;AApBK;AAAA;AAAA,gDAsBc;AAChB,oBAAI,OAAO,IAAX;;AAEA,oBAAI,OAAO,+BAAX;;AAEA,oBAAI,IAAI,EAAE,IAAF,CAAR;;AAEA,qBAAK,MAAL,GAAc,uBAAuB,gBAAgB,OAAhB,CAAwB,MAAxB,GAAiC,CAAxD,CAAd;AACA,wBAAQ,GAAR,CAAY,gBAAZ,EAA8B,KAAK,MAAnC;AACA,gCAAgB,OAAhB,CAAwB,IAAxB,CAA6B,EAAC,QAAQ,KAAK,MAAd,EAAsB,SAAS,CAA/B,EAAkC,QAAQ,KAAK,MAA/C,EAAuD,WAAW,IAAlE,EAA7B;AACA,qBAAK,WAAL,GAAmB,CAAnB;AACA,oBAAI,MAAM,EAAE,sCAAsC,KAAK,MAA3C,GAAoD,IAApD,GAA2D,KAAK,MAAL,CAAY,QAAZ,EAA3D,GAAoF,WAAtF,CAAV;AACA,kBAAE,mBAAF,EAAuB,MAAvB,CAA8B,GAA9B;;AAEA,kBAAE,IAAF,CAAO,IAAP,EAAa,KAAK,MAAlB;;AAEA,kBAAE,YAAF,EAAgB,MAAhB,CAAuB,CAAvB;AACA,kBAAE,SAAF,EAAa,IAAb;AACH;AAxCK;AAAA;AAAA,qCA0CG;AACL,oBAAI,OAAO,IAAX;AACA,qBAAK,WAAL,CAAiB,IAAjB,CAAsB,KAAK,MAAL,CAAY,OAAZ,EAAtB;AACH;AA7CK;AAAA;AAAA,mCA+CC,KA/CD,EA+CQ;AACV,oBAAI,OAAO,IAAX;AACA,wBAAQ,MAAM,IAAd;AACI,yBAAK,QAAL;AACI,gCAAQ,MAAM,MAAd;AACI,iCAAK,UAAL;AACI,qCAAK,QAAL;AACA;AACJ,iCAAK,QAAL;AACI,qCAAK,MAAL;AACA;AANR;AAQA;AAVR;AAYH;AA7DK;;AAAA;AAAA;;AA+DV,oBAAgB,OAAhB,GAA0B,EAA1B;;AAEA,MAAE,QAAF,EAAY,KAAZ,CAAkB,YAAY;AAC1B,gBAAQ,GAAR,CAAY,2BAAZ;AACA,WAAG,QAAH,CAAY,iBAAZ,EAA+B,gBAA/B,CAAgD;AAC5C,oBAAQ,gBAAU,KAAV,EAAiB;AACrB,oBAAI,MAAM,IAAN,IAAc,QAAd,IAA0B,MAAM,MAAN,IAAgB,MAA9C,EAAsD;AAClD,wBAAI,KAAK,IAAI,eAAJ,CAAoB,MAAM,IAA1B,CAAT;AACA,uBAAG,iBAAH;AACH;AACJ;AAN2C,SAAhD;AAQH,KAVD;;AAYA,WAAO,EAAP,CAAU,EAAV,CAAa,aAAb,GAA6B,eAA7B;;;AAGH,CAhFD,EAgFG,MAhFH","file":"reportmanager.js","sourcesContent":["\"use strict\";\n(function ($) {\n    var _ = require(\"underscore\");\n    var oo = require(\"openorange\");\n    var cm = oo.classmanager;\n\n    class ReportContainer {\n\n        static findReport(id) {\n            return require('openorange').classmanager.getClass('Embedded_Report').findReport(id);\n        }\n\n        constructor(report) {\n            this.report = report;\n            //this.windowjson = JSON.parse(JSON.stringify(this.report.getDescription().window));   //deep clone of the object because I need to add some metadata to it\n            this.report.addListener(this);\n            return this\n        }\n\n        setFocus(report) {\n            $('ul.tabs').tabs('select_tab', this.tab_id);\n        }\n\n        appendToWorkspace() {\n            var self = this;\n            //console.log(containerElement)\n            var html = '<div class=\"container\"></div>';\n\n            var w = $(html)\n\n            this.tab_id = \"tab_reportwindow_\" + (ReportContainer.reports.length + 1);\n            console.log(\"ADDING REPORT:\", this.tab_id)\n            ReportContainer.reports.push({report: this.report, element: w, tab_id: this.tab_id, container: self});\n            this.__element__ = w;\n            var tab = $('<li class=\"tab col s3\"><a href=\"#' + this.tab_id + '\">' + this.report.getTitle() + '</a></li>');\n            $('ul.tabs.workspace').append(tab);\n\n            w.attr('id', this.tab_id);\n\n            $('#workspace').append(w);\n            $('ul.tabs').tabs();\n        };\n\n        render() {\n            var self = this\n            self.__element__.html(this.report.getHTML())\n        };\n\n        update(event) {\n            var self = this;\n            switch (event.type) {\n                case \"report\":\n                    switch (event.action) {\n                        case 'setFocus':\n                            self.setFocus()\n                            break;\n                        case 'render':\n                            self.render()\n                            break;\n                    }\n                    break\n            }\n        };\n    }\n    ReportContainer.reports = [];\n\n    $(document).ready(function () {\n        console.log(\"en docready reportmanager\")\n        cm.getClass(\"Embedded_Report\").addClassListener({\n            update: function (event) {\n                if (event.type == 'report' && event.action == 'open') {\n                    let wm = new ReportContainer(event.data)\n                    wm.appendToWorkspace()\n                }\n            }\n        });\n    })\n\n    window.oo.ui.reportmanager = ReportContainer;\n    //$.extend(true, window.oo.ui, {reportmanager: ReportContainer})\n    //window.ReportManager = ReportContainer; //para hacer global la variable ReportContainer\n})(jQuery);\n\n\n"]}