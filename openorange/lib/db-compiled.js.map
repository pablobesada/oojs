{"version":3,"sources":["db.js"],"names":[],"mappings":";AACA,IAAI,QAAQ,QAAQ,OAAR,CAAZ;;;;;;AAMA,IAAI,KAAK,EAAT;;AAEA,GAAG,IAAH,GAAkB,MAAM,UAAN,CAAiB;AAC/B,qBAAkB,GADa,E;AAE/B,UAAW,WAFoB;AAG/B,UAAW,MAHoB;AAI/B,cAAW,QAJoB;AAK/B,cAAW,IALoB;AAM/B,WAAY;AANmB,CAAjB,CAAlB;AAQA,SAAS,eAAT,CAAyB,GAAzB,EAA6B,GAA7B,EAAkC;;AAE9B,SAAK,aAAL,CAAmB,UAAS,GAAT,EAAa,UAAb,EAAwB;AACvC,YAAI,GAAJ,EAAS;AACL,uBAAW,OAAX;AACA,gBAAI,IAAJ,CAAS,EAAC,QAAS,GAAV,EAAe,UAAW,8BAA1B,EAAT;AACA;AACH;;AAED,gBAAQ,GAAR,CAAY,qBAAqB,WAAW,QAA5C;;AAEA,mBAAW,KAAX,CAAiB,oBAAjB,EAAsC,UAAS,GAAT,EAAa,IAAb,EAAkB;AACpD,uBAAW,OAAX;AACA,gBAAG,CAAC,GAAJ,EAAS;AACL,oBAAI,IAAJ,CAAS,IAAT;AACH;AACJ,SALD;;AAOA,mBAAW,EAAX,CAAc,OAAd,EAAuB,UAAS,GAAT,EAAc;AACjC,gBAAI,IAAJ,CAAS,EAAC,QAAS,GAAV,EAAe,UAAW,8BAA1B,EAAT;AACA;AACH,SAHD;AAIH,KApBD;AAqBH;;AAGD,OAAO,OAAP,GAAiB,EAAjB","file":"db-compiled.js","sourcesContent":["\nvar mysql = require('mysql');\n// Note that the library's classes are not properties of the main export\n// so we require and promisifyAll them manually\n//Promise.promisifyAll(require(\"mysql/lib/Connection\").prototype);\n//var mysql_pool = Promise.promisifyAll(require(\"mysql/lib/Pool\").prototype);\n//var mysql     =    require('mysql');\nvar db = {}\n\ndb.pool      =    mysql.createPool({\n    connectionLimit : 100, //important\n    host     : 'localhost',\n    user     : 'root',\n    password : 'rootXy',\n    database : 'oo',\n    debug    :  false\n});\nfunction handle_database(req,res) {\n\n    pool.getConnection(function(err,connection){\n        if (err) {\n            connection.release();\n            res.json({\"code\" : 100, \"status\" : \"Error in connection database\"});\n            return;\n        }\n\n        console.log('connected as id ' + connection.threadId);\n\n        connection.query(\"select * from user\",function(err,rows){\n            connection.release();\n            if(!err) {\n                res.json(rows);\n            }\n        });\n\n        connection.on('error', function(err) {\n            res.json({\"code\" : 100, \"status\" : \"Error in connection database\"});\n            return;\n        });\n    });\n}\n\n\nmodule.exports = db;\n\n"]}