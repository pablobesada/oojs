{"version":3,"sources":["../../../node_modules/openorange/lib/client/openorange.es6"],"names":[],"mappings":"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","file":"openorange.js","sourcesContent":["\"use strict\";\n\n(function ($) {\n    let oopath = '/lib/client/openorange.js'\n    let ooscriptpath = $('script[src$=\"' + oopath + '\"]').attr('src')\n    let __baseurl__ = ooscriptpath.substring(0, ooscriptpath.length - oopath.length);\n\n    let classmanager = Object.create(null);\n    let orm = {};\n    let __currentUser__ = null;\n    classmanager.lookupdirs = [\"records\", \"windows\", \"reports\", \"modules\", \"tools\", \"documents\"];\n    classmanager.scriptdirs = [\"core\", \"base\", \"standard\", \"test\"];\n    classmanager.reversed_scriptdirs = Array.prototype.slice.call(classmanager.scriptdirs).reverse()\n    classmanager.extractScriptDir = function extractScriptDir(dirname) {\n        for (var i in classmanager.reversed_scriptdirs) {\n            var sd = classmanager.reversed_scriptdirs[i];\n            var idx = dirname.lastIndexOf(\"/\" + sd + \"/\")\n            if (idx >= 0) {\n                return sd;\n            }\n        }\n        return null;\n    }\n\n    classmanager.createClass = function createClass(description, filename) {\n        var ParentClass = classmanager.getParentClassFor(description.name, description.inherits, filename);\n        var ChildClass = ParentClass.createChildClass(description, filename);\n        return ChildClass;\n    }\n\n\n    let require = function require(module) {\n        if (module == \"openorange\") return window.oo; //devuelvo window.oo porque ese objeto va a haber si extendido por windowmanager, listiwndowmanger, etc, etc, etc.\n        if (module == \"underscore\") return _;\n        if (module == \"moment\") return moment;\n        if (module == \"chance\") return Chance;\n        if (module == \"js-md5\") return md5;\n        return loadModule(module)\n    }\n\n    function global() {\n    }\n\n    global.__main__ = {require: require}\n    require.main = {require: require}\n\n    classmanager.classes = {}\n    classmanager.__class_structure__ = null;\n    classmanager.getClassStructure = function getClassStructure() {\n        let self = this;\n        if (this.__class_structure__ == null) {\n            var url = __baseurl__ + '/classStructure';\n            $.ajax({\n                url: url,\n                contentType: 'application/json; charset=utf-8',\n                dataType: \"json\",\n                data: {},\n                async: false,\n                success: function (result) {\n                    self.__class_structure__ = result.response;\n                },\n                error: function (jqXHR, textStatus, errorThrown) {\n                    console.log(errorThrown)\n                    throw errorThrown;\n                },\n                complete: function () {\n                }\n            });\n        }\n        return self.__class_structure__;\n    }\n\n    classmanager.getClasses = function getClasses() {\n        return classmanager.classes;\n    }\n    classmanager.getClass = function getClass(name, options) {\n        let opts = options || {min_sd: 0, max_sd: classmanager.reversed_scriptdirs.length-1};\n        let min_sd = 'min_sd' in opts? opts.min_sd : 0;\n        let max_sd = 'max_sd' in opts? opts.max_sd : classmanager.reversed_scriptdirs.length-1;\n        if (min_sd >= classmanager.reversed_scriptdirs.length) return null;\n        if (name in classmanager.classes) {\n            for (let c=0;c<classmanager.classes[name].length;c++) {\n                let clsinfo = classmanager.classes[name][c]\n                if (clsinfo.sd_idx >= min_sd && clsinfo.sd_idx <= max_sd) {\n                    return clsinfo.cls;\n                }\n            }\n        }\n        let classStructure = classmanager.getClassStructure();\n        for (let i = min_sd; i <= max_sd; i++) {\n            var sd = classmanager.reversed_scriptdirs[i];\n            for (let j = 0; j < classmanager.lookupdirs.length; j++) {\n                let ld = classmanager.lookupdirs[j]\n                if (name in classStructure[i][ld]) {\n                    //console.log(`fetching from server`)\n                    let url = __baseurl__ + '/class';\n                    let res = null;\n                    $.ajax({\n                        url: url,\n                        dataType: \"script\",\n                        data: {name: name, min_sd: i, max_sd: i},\n                        async: false,\n                        success: function (result) {\n                            //console.log(\"A) loading class: \" + name)\n                            res = moduleFunction();\n                            //let sd = classmanager.extractScriptDir(res.getDescription().filename);\n                            //console.log(\"SD: \", sd)\n                            if (!(name in classmanager.classes)) classmanager.classes[name] = []\n                            classmanager.classes[name].push({sd_idx: i, cls: res});\n                            classmanager.classes[name].sort(function (a,b) {return a.sd_idx - b.sd_idx});\n                        },\n                        error: function (jqXHR, textStatus, errorThrown) {\n                            console.log(errorThrown)\n                            throw errorThrown;\n                        },\n                        complete: function () {\n                        }\n                    });\n                    return res;\n                }\n            }\n        }\n        //console.log(\"class not found in structure\")\n        return null;\n    }\n\n    classmanager.SuperClass = function SuperClass(description) {\n        return classmanager.getParentClassFor(description.name, description.inherits, description.filename);\n    }\n\n    classmanager.getParentClassFor = function getParentClassFor(name, parent, classpath) {\n        if (!name || !parent || !classpath) {\n            if (!name) throw new Error(\"can't find a parent class without a name\")\n            if (!parent) throw new Error(\"can't find a parent class without a inherit attrbute\")\n            if (!classpath) throw new Error(\"can't find a parent class without a path\")\n        }\n        var sd = classmanager.extractScriptDir(classpath)\n        var cls = classmanager.getClass(name, {min_sd: classmanager.reversed_scriptdirs.indexOf(sd) + 1})\n        if (cls != null) return cls;\n        var cls = classmanager.getClass(parent);\n        return cls;\n\n        /*\n\n\n\n         let modname = null;\n         var ms = max_script_dir_index;\n         if (ms == null) ms = 0;\n         for (let i = ms; i < this.reversed_scriptdirs.length; i++) {\n         var sd = this.reversed_scriptdirs[i];\n         for (let j = 0; j < this.lookupdirs.length; j++) {\n         let ld = this.lookupdirs[j]\n         if (name in this.__class_structure__[i][ld]) {\n         return getClass(name, i)\n         }\n         if (modname) break\n         }\n         if (modname) break\n         }\n\n         var k = name + \"|\" + parent + \"|\" + dirname;\n         if (k in classmanager.classes) {\n         //console.log(\"getparentclass: returning \" + name + \" from cache\");\n         return classmanager.classes[k];\n         }\n         var url = __baseurl__ + '/parentclass';\n         var res = null;\n         $.ajax({\n         url: url,\n         dataType: \"script\",\n         async: false,\n         data: {name: name, parent: parent, dirname: dirname},\n         success: function (result) {\n         console.log(\"B) loading class: \" + name + \" \" + parent)\n         res = moduleFunction();\n         //console.log(\"en parent success: \" + name +\"/\" + parent + \"   \" + res.__filename__);\n         classmanager.classes[k] = res;\n         //console.log(\"getparentclass: fetching \" + name + \"/\" + parent + \"/\" + dirname + \" from server\");\n         //console.log(res)\n         if (res.__description__.name != name) {\n         //console.log(\"storing as: \" + res.__description__.name + \" and \" + res.__description__.name + \"|0\");\n         classmanager.classes[res.__description__.name + \"|0\"] = res;\n         }\n         var sd_idx = classmanager.reversed_scriptdirs.indexOf(classmanager.extractScriptDir(res.__description__.filename));\n         if (sd_idx != 0) {\n         classmanager.classes[res.__description__.name + \"|\" + sd_idx] = res;\n         }\n\n         },\n         error: function (jqXHR, textStatus, errorThrown) {\n         if (textStatus == 'parsererror') {\n         //evaluo el codigo que para vuelva a saltar el error y aparezca en el debugger\n         eval(jqXHR.responseText)\n         }\n         console.log(errorThrown)\n         throw errorThrown;\n         },\n         complete: function () {\n         //console.log(\"en getparentclass::complete\");\n         }\n         });\n         return res;\n         */\n    }\n\n    let loadedModules = {}\n    let loadModule = function loadModule(url) {\n        if (url in loadedModules) {\n            //console.log(\"getparentclass: returning \" + name + \" from cache\");\n            return loadedModules[url];\n        }\n        var res = null;\n        $.ajax({\n            url: __baseurl__ + '/module',\n            dataType: \"script\",\n            data: {url: url},\n            async: false,\n            success: function (result) {\n                //console.log(\"en success: \" + name);\n                res = moduleFunction();\n                loadedModules[url] = res;\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                //console.log(\"en fail\")\n                console.log(errorThrown)\n                throw errorThrown;\n            },\n            complete: function () {\n                //console.log(\"en getclass::complete\");\n            }\n        });\n        return res;\n    }\n\n    let login = function (user, pass) {\n        let password = pass || '';\n        $.ajax({\n            url: __baseurl__ + '/login',\n            contentType: 'application/json; charset=utf-8',\n            async: true,\n            type: \"POST\",\n            dataType: \"json\",\n            data: JSON.stringify({username: user, md5pass: md5(password)}),\n            success: function (result) {\n                if (result.ok == true) {\n                    __currentUser__ = user;\n                } else {\n                    console.log(result.error)\n                }\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                console.log(errorThrown)\n                throw errorThrown;\n            },\n            complete: function () {\n            }\n        });\n\n    }\n\n    let rollback = function rollback() {\n        return new Promise(function (resolve, reject) {\n            var url = __baseurl__ + '/oo/rollback';\n            $.ajax({\n                type: \"POST\",\n                url: url,\n                contentType: 'application/json; charset=utf-8',\n                dataType: \"json\",\n                async: true,\n                //data: JSON.stringify(data),\n                success: function (result) {\n                    if (!result.ok) {\n                        reject(result.error);\n                        return;\n                    }\n                    var response = 'response' in result ? result.response : null;\n                    resolve(response);\n                    return;\n                },\n                error: function (jqXHR, textStatus, errorThrown) {\n                    //console.log(\"en fail\")\n                    reject(errorThrown);\n                },\n                complete: function () {\n                    //console.log(\"en load::complete\");\n                }\n            });\n        });\n    }\n\n    let beginTransaction = function beginTransaction() {\n        return new Promise(function (resolve, reject) {\n            var url = __baseurl__ + '/oo/begintransaction';\n            $.ajax({\n                type: \"POST\",\n                url: url,\n                contentType: 'application/json; charset=utf-8',\n                dataType: \"json\",\n                async: true,\n                //data: JSON.stringify(data),\n                success: function (result) {\n                    if (!result.ok) {\n                        reject(result.error);\n                        return;\n                    }\n                    var response = 'response' in result ? result.response : null;\n                    resolve(response);\n                    return;\n                },\n                error: function (jqXHR, textStatus, errorThrown) {\n                    //console.log(\"en fail\")\n                    reject(errorThrown);\n                },\n                complete: function () {\n                    //console.log(\"en load::complete\");\n                }\n            });\n        });\n    }\n\n    let commit = function commit() {\n        return new Promise(function (resolve, reject) {\n            var url = __baseurl__ + '/oo/commit';\n            $.ajax({\n                type: \"POST\",\n                url: url,\n                contentType: 'application/json; charset=utf-8',\n                dataType: \"json\",\n                async: true,\n                //data: JSON.stringify(data),\n                success: function (result) {\n                    if (!result.ok) {\n                        reject(result.error);\n                        return;\n                    }\n                    var response = 'response' in result ? result.response : null;\n                    resolve(response);\n                    return;\n                },\n                error: function (jqXHR, textStatus, errorThrown) {\n                    //console.log(\"en fail\")\n                    reject(errorThrown);\n                },\n                complete: function () {\n                    //console.log(\"en load::complete\");\n                }\n            });\n        });\n    }\n\n    let currentUser = function currentUser() {\n        return __currentUser__\n    }\n\n    let fetchCurrentUser = async function fetchCurrentUser() {\n        return new Promise(function (resolve, reject) {\n            $.ajax({\n                type: \"GET\",\n                url: __baseurl__ + '/getcurrentuser',\n                contentType: 'application/json; charset=utf-8',\n                dataType: \"json\",\n                async: true,\n                success: function (result) {\n                    if (!result.ok) {\n                        reject(result.error);\n                        return;\n                    }\n                    var response = 'response' in result ? result.response : null;\n                    __currentUser__ = result.currentuser;\n                    resolve(result.currentuser);\n                    return;\n                },\n                error: function (jqXHR, textStatus, errorThrown) {\n                    reject(errorThrown);\n                },\n                complete: function () {\n                    //console.log(\"en load::complete\");\n                }\n            });\n        });\n    }\n\n    let askYesNo = async function askYesNo(txt) {\n        if (oo.ui && oo.ui.dialogs && oo.ui.dialogs.askYesNo) {\n            return oo.ui.dialogs.askYesNo(txt);\n        }\n        throw new Error(\"Dialog not found\");\n    }\n\n    let inputString = async function inputString(txt) {\n        if (oo.ui && oo.ui.dialogs && oo.ui.dialogs.inputString) {\n            return oo.ui.dialogs.inputString(txt);\n        }\n        throw new Error(\"Dialog not found\");\n    }\n\n    let alert = async function alert(txt) {\n        console.log(\"en alert\")\n        if (oo.ui && oo.ui.dialogs && oo.ui.dialogs.alert) {\n            return oo.ui.dialogs.alert(txt);\n        }\n        throw new Error(\"Dialog not found\");\n    }\n\n    let postMessage = async function postMessage(txt) {\n        console.log(\"en alert\")\n        if (oo.ui && oo.ui.dialogs && oo.ui.dialogs.postMessage) {\n            return oo.ui.dialogs.postMessage(txt);\n        }\n        throw new Error(\"Dialog not found\");\n    }\n\n    class PushReceiver {\n        constructor() {\n            let self = this;\n            self.socket = io()\n            self.socket.on('askYesNo', async function (data, fn) {let r = await oo.askYesNo(data); if (fn) fn(r);});\n            self.socket.on('inputString', async function (data, fn) {let r= await oo.inputString(data); if (fn) fn(r);});\n            //self.socket.on('inputString', async function (data) {self.socket.emit('response',await oo.inputString(data))});\n            self.socket.on('alert', async function (data, fn) {let r = await oo.alert(data); if (fn) fn(r);});\n            self.socket.on('postMessage', async function (data, fn) {let r = await oo.postMessage(data); if (fn) fn(r);});\n        }\n    }\n\n    let oo = {\n        ui: {},\n        classmanager: classmanager,\n        orm: orm,\n        isServer: false,\n        isClient: true,\n        login: login,\n        beginTransaction: beginTransaction,\n        rollback: rollback,\n        commit: commit,\n        currentUser: currentUser,\n        baseurl: __baseurl__,\n        md5: md5,\n        alert: alert,\n        askYesNo: askYesNo,\n        inputString: inputString,\n        postMessage: postMessage,\n        pushreceiver: new PushReceiver(),\n        //ready: ready,\n    }\n\n    fetchCurrentUser();\n\n\n\n\n\n\n    window.oo = oo\n    window.require = require\n    //$.extend(true, window, {require: require, oo: oo})\n})(jQuery)"]}