{"version":3,"sources":["TestRecord2.es6"],"names":[],"mappings":"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","file":"TestRecord2.js","sourcesContent":["//\"use strict\";\nvar cm = require('openorange').classmanager\nlet _ = require(\"underscore\")\nlet chance = require(\"chance\")()\nlet moment = require(\"moment\")\n\n\nvar Description = {\n    name: 'TestRecord2',\n    inherits: 'Record',\n    fields: {\n        TestName: {type: \"string\", length: 60},\n        SubTestName: {type: \"string\", length: 60},\n        String_Field: {type: \"string\", length: 60},\n        Integer_Field: {type: \"integer\"},\n    },\n    filename: __filename,\n}\n\nvar Parent = cm.SuperClass(Description)\n\nclass TestRecord extends Parent {\n\n    constructor() {\n        super()\n        this.checkReturnValue = true;\n        this.beforeInsertReturnValue = true;\n        this.beforeUpdateReturnValue = true;\n        this.beforeInsert_recordsToStore = [];\n    }\n\n    async check(){\n        let res = await Parent.tryCall(this, true, \"check\");\n        if (!res) return res;\n        return this.checkReturnValue;\n    }\n\n    async beforeInsert(){\n        let res = await Parent.tryCall(this, true, \"beforeInsert\");\n        if (!res) return res;\n        for (let i in this.beforeInsert_recordsToStore) {\n            let record = this.beforeInsert_recordsToStore[i];\n            let res = await record.store();\n            if (!res) throw new Error(\"no se pudo grabar registro dentro de beforeInsert\")\n        }\n        return this.beforeInsertReturnValue;\n    }\n\n    async beforeUpdate(){\n        let res = await Parent.tryCall(this, true, \"beforeUpdate\");\n        if (!res) return res;\n        return this.beforeUpdateReturnValue;\n    }\n\n    static fillRecordWithRandomValues(record) {\n        let cls = this;\n        var fields = record.__class__.getDescription().fields\n        _(fields).forEach(function(fielddef, fn) {\n            if (fn == 'internalId') return;\n            if (fn == 'masterId') return;\n            if (fn == 'rowNr') return;\n            switch (fielddef.type) {\n                case 'string':\n                    record[fn] = chance.word({length: fielddef.length});\n                    break;\n                case 'integer':\n                    record[fn] = chance.integer({min: -10000, max: 10000});\n                    break;\n                case 'date':\n                    record[fn] = moment()\n                    break;\n                case 'time':\n                    //record[fn] = moment()\n                    record[fn] = '07:04:33'\n                    break;\n                case 'detail':\n                    var nrows = chance.natural({min: 4, max: 13})\n                    for (var j=0;j<nrows;j++) {\n                        //console.log(fn)\n                        var row = record[fn].newRow()\n                        cls.fillRecordWithRandomValues(row)\n                        record[fn].push(row);\n                    }\n            }\n        });\n        return record;\n    }\n\n    fillWithRandomValues() {\n        return this.__class__.fillRecordWithRandomValues(this);\n    }\n\n    static async newSavedRecord() {\n        let rec = this.new().fillWithRandomValues();\n        if (await rec.store()) return rec;\n        return null;\n\n    }\n\n}\n\nmodule.exports = TestRecord.initClass(Description)"]}