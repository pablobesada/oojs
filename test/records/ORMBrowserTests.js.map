{"version":3,"sources":["ORMBrowserTests.es6"],"names":[],"mappings":"AAAA;;;;;;;;AACA,IAAI,KAAK,QAAQ,YAAR,CAAT;AACA,IAAI,IAAI,QAAQ,YAAR,CAAR;;IAEM,e;;;;;;;;iFACkB,C,EAAE,G,EAAK,E;oBACnB,G,EACA,I,EACA,G,EAGK,C,EAGL,c,EACK,E,EACD,M,EAKJ,Q,EACA,U,EAQA,G;;;;;;AAxBA,mC,GAAM,GAAG,YAAH,CAAgB,QAAhB,CAAyB,YAAzB,C;AACN,oC,GAAO,GAAG,YAAH,CAAgB,QAAhB,CAAyB,aAAzB,C;AACP,mC,GAAM,IAAI,GAAJ,GAAU,oBAAV,E;;AACV,oCAAI,4BAAJ,GAAmC,IAAnC;AACA,oCAAI,sCAAJ,GAA6C,IAA7C;AACA,qCAAS,CAAT,IAAc,IAAI,IAAlB;AAAwB,wCAAI,IAAJ,CAAS,CAAT,EAAY,YAAZ,GAA2B,SAAS,CAApC;AAAxB,iCACA,IAAI,uBAAJ,GAA8B,GAA9B;AACA,oCAAI,WAAJ,GAAkB,UAAU,CAA5B;AACI,8C,GAAiB,E;;AACrB,qCAAS,EAAT,GAAW,CAAX,EAAa,KAAE,CAAf,EAAiB,IAAjB,EAAsB;AACd,0CADc,GACL,KAAK,GAAL,GAAW,oBAAX,EADK;;AAElB,2CAAO,WAAP,GAAqB,IAAI,WAAzB;AACA,mDAAe,IAAf,CAAoB,MAApB;AACH;AACD,oCAAI,8BAAJ,CAAmC,cAAnC;AACI,wC,GAAW,EAAC,cAAc,EAAf,EAAmB,kBAAkB,EAArC,E;AACX,0C,GAAa,EAAE,IAAI,8BAAJ,EAAF,EAAwC,GAAxC,CAA4C,UAAU,CAAV,EAAa;AAAC,2CAAO,KAAK,SAAL,CAAe,EAAE,MAAF,EAAf,CAAP;AAAkC,iCAA5F,C;;AACjB,2CAAW,IAAX,CAAgB,KAAK,SAAL,CAAe,IAAI,MAAJ,EAAf,CAAhB;AACA,oCAAI,GAAJ,EAAS;AACL,6CAAS,YAAT,GAAwB,UAAxB;AACH,iCAFD,MAEO;AACH,6CAAS,gBAAT,GAA4B,UAA5B;AACH;AACD,mCAAG,QAAH;;uCACgB,IAAI,IAAJ,E;;;AAAZ,mC;;AACJ,wCAAQ,GAAR,CAAY,GAAZ;;qCACI,G;;;;;;uCAAW,GAAG,MAAH,E;;;;;;;;;;;;;;;;;;;;;AAKvB,gBAAgB,eAAhB,GAAkC,EAAC,UAAU,UAAX,EAAlC;AACA,OAAO,OAAP,GAAiB,eAAjB","file":"ORMBrowserTests.js","sourcesContent":["\"use strict\"; \nlet oo = require(\"openorange\")\nlet _ = require(\"underscore\")\n\nclass ORMBrowserTests {\n    static async test1 (t,bir, cb) {\n        let cls = oo.classmanager.getClass(\"TestRecord\")\n        let cls2 = oo.classmanager.getClass(\"TestRecord2\")\n        let rec = cls.new().fillWithRandomValues();\n        rec.waitBeforeReturningFromCheck = 2000;\n        rec.waitBeforeStoringRecordsInBeforeInsert = 2000;\n        for (let i in rec.Rows) rec.Rows[i].String_Field = 'ROW ' + t;\n        rec.beforeInsertReturnValue = bir;\n        rec.SubTestName = 'TEST ' + t;\n        let recs_to_insert = []\n        for (let i=0;i<3;i++) {\n            let record = cls2.new().fillWithRandomValues()\n            record.SubTestName = rec.SubTestName\n            recs_to_insert.push(record);\n        }\n        rec.setBeforeInsert_recordsToStore(recs_to_insert)\n        let response = {should_exist: [], should_not_exist: []}\n        let saved_recs = _(rec.getBeforeInsert_recordsToStore()).map(function (r) {return JSON.stringify(r.toJSON())});\n        saved_recs.push(JSON.stringify(rec.toJSON()));\n        if (bir) {\n            response.should_exist = saved_recs\n        } else {\n            response.should_not_exist = saved_recs\n        }\n        cb(response)\n        let res = await rec.save();\n        console.log(res)\n        if (res) await oo.commit()\n    }\n\n}\n\nORMBrowserTests.__description__ = {filename: __filename}\nmodule.exports = ORMBrowserTests;"]}