{"version":3,"sources":["LoginTest.es6"],"names":[],"mappings":";AAAA;;;;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,SAAS,IAAI,OAAJ,CAAY,QAAZ,GAAb;AACA,IAAI,KAAK,QAAQ,YAAR,CAAT;AACA,IAAI,QAAQ,GAAG,KAAf;AACA,IAAI,KAAK,GAAG,YAAZ;AACA,IAAI,MAAM,QAAQ,QAAR,CAAV;;AAEA,SAAS,OAAT,EAAkB,YAAY;AAAA;;AAC1B,QAAI,OAAO,GAAG,QAAH,CAAY,MAAZ,CAAX;AACA,OAAG,cAAH,4CAAmB;AAAA,YACX,GADW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACC,GAAG,KAAH,CAAS,OAAO,IAAP,CAAY,EAAC,QAAQ,GAAT,EAAZ,CAAT,EAAqC,OAAO,IAAP,CAAY,EAAC,QAAQ,GAAT,EAAZ,CAArC,CADD;;AAAA;AACX,2BADW;;AAEf,+BAAO,GAAP,EAAY,EAAZ,CAAe,KAAf,CAAqB,8DAArB;AAFe;AAAA,+BAGH,GAAG,KAAH,CAAS,OAAO,IAAP,CAAY,EAAC,QAAQ,GAAT,EAAZ,CAAT,EAAqC,IAArC,CAHG;;AAAA;AAGf,2BAHe;;AAIf,+BAAO,GAAP,EAAY,EAAZ,CAAe,KAAf,CAAqB,iEAArB;AAJe;AAAA,+BAKH,GAAG,KAAH,CAAS,IAAT,EAAe,IAAf,CALG;;AAAA;AAKf,2BALe;;AAMf,+BAAO,GAAP,EAAY,EAAZ,CAAe,KAAf,CAAqB,sDAArB;AANe;AAAA,+BAOH,GAAG,KAAH,CAAS,EAAT,EAAa,EAAb,CAPG;;AAAA;AAOf,2BAPe;;AAQf,+BAAO,GAAP,EAAY,EAAZ,CAAe,KAAf,CAAqB,kEAArB;;AARe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAnB;;AAWA,OAAG,kBAAH,4CAAuB;AAAA,YAGX,CAHW,EAOX,GAPW;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEf,2BAAG,gBAAH;AACI,yBAHW,GAGP,KAAK,GAAL,EAHO;;AAIf,0BAAE,IAAF,GAAS,OAAO,IAAP,CAAY,EAAC,QAAQ,EAAT,EAAZ,CAAT;AACA,0BAAE,IAAF,GAAS,OAAO,IAAP,CAAY,EAAC,QAAQ,EAAT,EAAZ,CAAT;AACA,0BAAE,QAAF,GAAa,IAAI,EAAE,IAAN,CAAb;AANe;AAAA,+BAOC,EAAE,KAAF,EAPD;;AAAA;AAOX,2BAPW;;AAQf,+BAAO,GAAP,EAAY,EAAZ,CAAe,IAAf;AARe;AAAA,+BASH,GAAG,KAAH,CAAS,EAAE,IAAX,EAAiB,EAAE,QAAnB,CATG;;AAAA;AASf,2BATe;;AAUf,+BAAO,GAAP,EAAY,EAAZ,CAAe,IAAf;AAVe;AAAA,+BAWH,GAAG,KAAH,CAAS,EAAE,IAAX,EAAiB,EAAE,IAAnB,CAXG;;AAAA;AAWf,2BAXe;;AAYf,+BAAO,GAAP,EAAY,EAAZ,CAAe,KAAf;AAZe;AAAA,+BAaH,GAAG,KAAH,CAAS,EAAE,IAAX,EAAiB,IAAjB,CAbG;;AAAA;AAaf,2BAbe;;AAcf,+BAAO,GAAP,EAAY,EAAZ,CAAe,KAAf;AAde;AAAA,+BAeH,GAAG,KAAH,CAAS,EAAE,IAAX,EAAiB,EAAjB,CAfG;;AAAA;AAef,2BAfe;;AAgBf,+BAAO,GAAP,EAAY,EAAZ,CAAe,KAAf;;AAhBe;AAAA;;AAkBf,2BAAG,QAAH;AAlBe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAvB;AAqBH,CAlCD","file":"LoginTest.js","sourcesContent":["\"user strict\"\nvar should = require('should');\nvar chance = new require(\"chance\")()\nvar oo = require(\"openorange\")\nvar query = oo.query;\nvar cm = oo.classmanager\nvar md5 = require('js-md5')\n\ndescribe(\"Login\", function () {\n    let User = cm.getClass(\"User\")\n    it(\"Failed login\", async () => {\n        let res = await oo.login(chance.word({length: 200}), chance.word({length: 200}));\n        should(res).be.false(\"esta permitiendo login para un usuario y claves inexistentes\")\n        res = await oo.login(chance.word({length: 200}), null);\n        should(res).be.false(\"esta permitiendo login para un usuario inexistente y clave nula\")\n        res = await oo.login(null, null);\n        should(res).be.false(\"esta permitiendo login para un usuario y clave nulos\")\n        res = await oo.login('', '');\n        should(res).be.false(\"esta permitiendo login para un usuario y clave con string vacios\")\n    });\n\n    it(\"Successful login\", async () => {\n        try {\n            oo.beginTransaction()\n            let u = User.new()\n            u.Code = chance.word({length: 10})\n            u.pass = chance.word({length: 20})\n            u.Password = md5(u.pass)\n            let res = await u.store();\n            should(res).be.true();\n            res = await oo.login(u.Code, u.Password)\n            should(res).be.true()\n            res = await oo.login(u.Code, u.pass)\n            should(res).be.false()\n            res = await oo.login(u.Code, null)\n            should(res).be.false()\n            res = await oo.login(u.Code, '')\n            should(res).be.false()\n        } finally {\n            oo.rollback()\n        }\n    });\n});"]}