{"version":3,"sources":["Embedded_Report.es6"],"names":[],"mappings":"AAAA;;;;;;;;;;;;AACA,IAAI,KAAK,QAAQ,YAAR,EAAsB,YAA/B;;AAEA,IAAI,cAAc;AACd,UAAM,iBADQ;AAEd,cAAU,IAFI;AAGd,cAAU;AAHI,CAAlB;;;;;;;;IAYM,e;;;yCAEsB,U,EAAY,Q,EAAU;;;AAG1C,gBAAI;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,cAA2B,IAA3B,CAAJ;AACA,uBAAW,eAAX,GAA6B,EAA7B;AACA,uBAAW,eAAX,CAA2B,IAA3B,GAAkC,WAAW,IAA7C;AACA,uBAAW,eAAX,CAA2B,KAA3B,GAAmC,WAAW,KAA9C;AACA,uBAAW,eAAX,CAA2B,MAA3B,GAAoC,WAAW,MAAX,GAAoB,WAAW,MAA/B,GAAwC,IAA5E;AACA,uBAAW,YAAX,GAA0B,QAA1B;AACA,uBAAW,SAAX,GAAuB,IAAvB;AACA,iBAAK,eAAL,GAAuB,IAAvB;AACA,mBAAO,UAAP;AACH;;;2CAEyB,U,EAAY,Q,EAAU;;;AAG5C,gBAAI;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,cAA2B,IAA3B,CAAJ;AACA,uBAAW,eAAX,GAA6B,EAA7B;AACA,uBAAW,eAAX,CAA2B,IAA3B,GAAkC,WAAW,IAA7C;AACA,uBAAW,eAAX,CAA2B,KAA3B,GAAmC,WAAW,KAA9C;AACA,uBAAW,eAAX,CAA2B,MAA3B,GAAoC,WAAW,MAAX,GAAoB,WAAW,MAA/B,GAAwC,IAA5E;AACA,uBAAW,YAAX,GAA0B,QAA1B;AACA,uBAAW,SAAX,GAAuB,IAAvB;AACA,iBAAK,eAAL,GAAuB,IAAvB;AACA,mBAAO,UAAP;AACH;;;kCAEgB,U,EAAY;;AAEzB,iBAAK,eAAL,GAAuB,EAAvB;AACA,iBAAK,eAAL,CAAqB,IAArB,GAA4B,WAAW,IAAvC;AACA,iBAAK,eAAL,CAAqB,KAArB,GAA6B,WAAW,KAAxC;AACA,iBAAK,eAAL,CAAqB,MAArB,GAA8B,WAAW,MAAX,GAAoB,WAAW,MAA/B,GAAwC,IAAtE;AACA,iBAAK,eAAL,CAAqB,QAArB,GAAgC,WAAW,QAA3C;;;AAGA,mBAAO,IAAP;AACH;;;+BAGY;AACT,gBAAI,MAAM,IAAI,IAAJ,EAAV;AACA,gBAAI,SAAJ,GAAgB,IAAhB;AACA,mBAAO,GAAP;AACH;;;mCAEiB,E,EAAI;AAClB,gBAAI,MAAM,gBAAgB,WAA1B,EAAuC,OAAO,gBAAgB,WAAhB,CAA4B,EAA5B,CAAP;AACvC,mBAAO,IAAP;AACH;;;AAED,+BAAc;AAAA;;AACV,aAAK,QAAL,GAAgB,EAAhB;AACA,aAAK,MAAL,GAAc,gBAAgB,GAAhB,EAAd;AACA,aAAK,SAAL,GAAiB,KAAK,WAAtB;AACA,wBAAgB,WAAhB,CAA4B,KAAK,MAAjC,IAA2C,IAA3C;;AAEA,eAAO,IAAP;AACH;;;;gCAEO;AACJ,mBAAO,KAAK,MAAZ;AACH;;;;;oBAGO,I;;;;;AAAA,oC,GAAO,I;;AACX,qCAAK,SAAL,GAAiB,OAAO,MAAP,CAAc,OAAO,aAArB,EAAoC,IAApC,CAAyC,IAAzC,CAAjB;AACA,qCAAK,SAAL,CAAe,iBAAf;;uCACM,KAAK,GAAL,E;;;AACN,qCAAK,MAAL;;;;;;;;;;;;;;;;;;;;;;;;AAIA,wCAAQ,GAAR,CAAY,gCAAZ;;;;;;;;;;;;;;;;;;gCAGI;AACJ,iBAAK,QAAL,GAAgB,EAAhB;AACH;;;iCAEQ;AACL,iBAAK,SAAL,CAAe,MAAf;AACH;;;mCAEU;AACP,mBAAO,aAAP,CAAqB,QAArB,CAA8B,IAA9B;AACH;;;;;;;;;;;;;;kCAgBS;AACN,mBAAO,MAAM,KAAK,SAAL,CAAe,eAAf,CAA+B,IAArC,GAA4C,SAA5C,GAAwD,KAAK,SAAL,CAAe,YAAvE,GAAsF,GAA7F;AACH;;;mCAEU;AACP,mBAAO,KAAK,SAAL,CAAe,eAAf,CAA+B,KAAtC;AACH;;;kCAES;AACN,mBAAO,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAP;AACH;;;qCAEY;AACT,iBAAK,QAAL,CAAc,IAAd,CAAmB,SAAnB;AACH;;;mCAEU;AACP,iBAAK,QAAL,CAAc,IAAd,CAAmB,UAAnB;AACH;;;mCAEU;AACP,iBAAK,QAAL,CAAc,IAAd,CAAmB,MAAnB;AACH;;;iCAEQ;AACL,iBAAK,QAAL,CAAc,IAAd,CAAmB,OAAnB;AACH;;;yCAEgB;AACb,iBAAK,QAAL,CAAc,IAAd,CAAmB,gCAAnB;AACH;;;uCAEc;AACX,iBAAK,QAAL,CAAc,IAAd,CAAmB,OAAnB;AACH;;;+BAEM,I,EAAM;AACT,iBAAK,cAAL;AACA,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,MAAzB,EAAiC,GAAjC,EAAsC;AAClC,qBAAK,QAAL,CAAc,KAAK,CAAL,CAAd;AACH;AACD,iBAAK,YAAL;AACH;;;4BAEG,M,EAAQ;AACR,iBAAK,QAAL;AACA,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,OAAO,MAA3B,EAAmC,GAAnC,EAAwC;AACpC,qBAAK,QAAL,CAAc,OAAO,CAAP,CAAd;AACH;AACD,iBAAK,MAAL;AACH;;;iCAEQ,C,EAAG,O,EAAS;AACjB,gBAAI,QAAQ,CAAZ;AACA,gBAAI,UAAU,WAAW,IAAX,GAAkB,OAAlB,GAA4B,EAA1C;AACA,gBAAI,UAAU,EAAd;AACA,gBAAI,YAAY,OAAZ,IAAuB,eAAe,OAA1C,EAAmD;AAC/C,0BAAU,0DAA0D,KAAK,KAAL,EAA1D,GAAyE,qBAAzE,GAAiG,QAAQ,QAAR,CAAjG,GAAqH,OAArH,GAA+H,QAAQ,WAAR,CAA/H,GAAsJ,OAAtJ,GAAgK,KAAhK,GAAwK,MAAlL;AACH,aAFD,MAEO,IAAI,gBAAgB,OAApB,EAA6B;AAChC,oBAAI,QAAQ,eAAe,OAAf,GAAyB,MAAM,QAAQ,WAAR,CAAN,GAA6B,GAAtD,GAA4D,EAAxE;AACA,0BAAU,0DAA0D,KAAK,KAAL,EAA1D,GAAyE,6BAAzE,GAAyG,QAAQ,YAAR,CAAzG,GAAiI,KAAjI,GAAyI,KAAzI,GAAiJ,KAAjJ,GAAyJ,KAAzJ,GAAiK,MAA3K;AACH;AACD,iBAAK,QAAL,CAAc,IAAd,CAAmB,SAAS,OAAT,GAAmB,GAAnB,GAAyB,KAAzB,GAAiC,OAApD;AACH;;;;kFAEoB,C,EAAG,E,EAAI,C;oBACpB,G,EACA,G;;;;;AADA,mC,GAAM,GAAG,QAAH,CAAY,CAAZ,EAAe,GAAf,E;AACN,mC,GAAM,GAAG,QAAH,CAAY,IAAI,cAAJ,GAAqB,WAAjC,EAA8C,GAA9C,E;;AACV,oCAAI,EAAJ,IAAU,CAAV;;uCACU,IAAI,IAAJ,E;;;;;;;;AAGN,oCAAI,SAAJ,CAAc,GAAd;AACA,oCAAI,IAAJ;AACA,oCAAI,QAAJ;;;;;;;;;;;;;;;;;;;kFAIqB,M,EAAQ,M,EAAQ,K;;;;;AACzC,qCAAK,MAAL,EAAa,MAAb,EAAqB,KAArB;;;;;;;;;;;;;;;;;;yCAnFoB;AACpB,mBAAO,KAAK,eAAZ;AACH;;;;;;AAqFL,gBAAgB,SAAhB,GAA4B,IAA5B;AACA,gBAAgB,eAAhB,GAAkC,WAAlC;AACA,gBAAgB,GAAhB,GAAsB,CAAtB;AACA,gBAAgB,WAAhB,GAA8B,EAA9B;;AAGA,OAAO,OAAP,GAAiB,eAAjB","file":"Embedded_Report.js","sourcesContent":["\"use strict\"\nvar cm = require('openorange').classmanager\n\nvar Description = {\n    name: 'Embedded_Report',\n    inherits: null,\n    filename: __filename,\n}\n\n/*var Embedded_Report =  Object.create({\n '__super__': null,\n '__description__': Description,\n '__filename__': __filename,\n })*/\n\nclass Embedded_Report {\n\n    static createChildClass(descriptor, filename) {\n        //console.log(\"en createChildClass: \", this)\n        //var childclass = Object.create(this)\n        let childclass = class extends this {};\n        childclass.__description__ = {}\n        childclass.__description__.name = descriptor.name;\n        childclass.__description__.title = descriptor.title;\n        childclass.__description__.window = descriptor.window ? descriptor.window : null;\n        childclass.__filename__ = filename;\n        childclass.__super__ = this;\n        this.__recordClass__ = null;\n        return childclass;\n    }\n\n    static prepareParentClass(descriptor, filename) {\n        //console.log(\"en createChildClass: \" + this)\n        //var childclass = Object.create(this)\n        let childclass = class extends this {};\n        childclass.__description__ = {}\n        childclass.__description__.name = descriptor.name;\n        childclass.__description__.title = descriptor.title;\n        childclass.__description__.window = descriptor.window ? descriptor.window : null;\n        childclass.__filename__ = filename;\n        childclass.__super__ = this;\n        this.__recordClass__ = null;\n        return childclass;\n    }\n\n    static initClass(descriptor) {\n        //var childclass = Object.create(this)\n        this.__description__ = {}\n        this.__description__.name = descriptor.name;\n        this.__description__.title = descriptor.title;\n        this.__description__.window = descriptor.window ? descriptor.window : null;\n        this.__description__.filename = descriptor.filename;\n        //childclass.__super__ = this;\n        //this.__recordClass__ = null;\n        return this;\n    }\n\n\n    static new() {\n        let res = new this();\n        res.__class__ = this;\n        return res;\n    }\n\n    static findReport(id) {\n        if (id in Embedded_Report.__reports__) return Embedded_Report.__reports__[id]\n        return null;\n    }\n\n    constructor() {\n        this.__html__ = [];\n        this.__id__ = Embedded_Report.ids++;\n        this.__class__ = this.constructor\n        Embedded_Report.__reports__[this.__id__] = this;\n        //console.log(Embedded_Report.__reports__);\n        return this;\n    }\n\n    getId() {\n        return this.__id__;\n    }\n\n    async open() {\n        var self = this\n        self.container = Object.create(window.ReportManager).init(self)\n        self.container.appendToWorkspace()\n        await self.run()\n        self.render();\n    }\n\n    async run() {\n        console.log(\"running run de Embedded_report\")\n    }\n\n    clear() {\n        this.__html__ = [];\n    }\n\n    render() {\n        this.container.render();\n    }\n\n    setFocus() {\n        window.ReportManager.setFocus(this)\n    }\n\n    /*\n     Embedded_Report.super = function callSuper(methodname, self) {\n     if (methodname in this.__super__) {\n     return this.__super__[methodname].apply(self, Array.prototype.slice.apply(arguments).slice(2));\n     } else {\n     return Promise.resolve()\n     }\n     }\n     */\n\n    static getDescription() {\n        return this.__description__\n    }\n\n    inspect() {\n        return \"<\" + this.__class__.__description__.name + \", from \" + this.__class__.__filename__ + \">\"\n    }\n\n    getTitle() {\n        return this.__class__.__description__.title;\n    }\n\n    getHTML() {\n        return this.__html__.join(\"\\n\")\n    }\n\n    startTable() {\n        this.__html__.push(\"<table>\")\n    }\n\n    endTable() {\n        this.__html__.push(\"</table>\")\n    }\n\n    startRow() {\n        this.__html__.push(\"<tr>\")\n    }\n\n    endRow() {\n        this.__html__.push(\"</tr>\")\n    }\n\n    startHeaderRow() {\n        this.__html__.push(\"<tr style='font-weight: bold'>\")\n    }\n\n    endHeaderRow() {\n        this.__html__.push(\"</tr>\")\n    }\n\n    header(cols) {\n        this.startHeaderRow();\n        for (var i = 0; i < cols.length; i++) {\n            this.addValue(cols[i])\n        }\n        this.endHeaderRow();\n    }\n\n    row(values) {\n        this.startRow();\n        for (var i = 0; i < values.length; i++) {\n            this.addValue(values[i])\n        }\n        this.endRow();\n    }\n\n    addValue(v, options) {\n        var value = v;\n        var options = options != null ? options : {};\n        var onclick = ''\n        if ('Window' in options && 'FieldName' in options) {\n            onclick = 'onclick=\"cm.getClass(\\'Embedded_Report\\').findReport(' + this.getId() + ').__std_zoomin__(\\'' + options['Window'] + '\\',\\'' + options['FieldName'] + '\\',\\'' + value + '\\')\"';\n        } else if ('CallMethod' in options) {\n            var param = 'Parameter' in options ? \"'\" + options['Parameter'] + \"'\" : '';\n            onclick = 'onclick=\"cm.getClass(\\'Embedded_Report\\').findReport(' + this.getId() + ').__call_method_zoomin__(\\'' + options['CallMethod'] + '\\',' + param + ',\\'' + value + '\\')\"';\n        }\n        this.__html__.push(\"<td \" + onclick + \">\" + value + \"</td>\")\n    }\n\n    async __std_zoomin__(w, fn, v) {\n        var wnd = cm.getClass(w).new()\n        var rec = cm.getClass(wnd.getDescription().recordClass).new()\n        rec[fn] = v\n        if (await rec.load()\n    )\n        {\n            wnd.setRecord(rec)\n            wnd.open();\n            wnd.setFocus();\n        }\n    }\n\n    async __call_method_zoomin__(method, params, value) {\n        this[method](params, value);\n    }\n}\n\nEmbedded_Report.__super__ = null\nEmbedded_Report.__description__ = Description\nEmbedded_Report.ids = 1;\nEmbedded_Report.__reports__ = [];\n\n\nmodule.exports = Embedded_Report"]}