{"version":3,"sources":["Embedded_Record.js"],"names":[],"mappings":"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","file":"Embedded_Record-compiled.js","sourcesContent":["\"use strict\";\nvar oo = global.__main__.require(\"./openorange\")\nvar _ = require(\"underscore\")\n\nvar Field = Object.create(null);\nField.init = function(name, type, length, persistent, linkto) {\n    this.name = name;\n    this.type = type;\n    this.length = length;\n    this.persistent = persistent;\n    this.linkto = linkto;\n    this.value = null;\n    this.listener = null;\n    return this;\n}\n\nField.getValue = function () {\n    //console.log(\"en get value: \" + this.value)\n    return this.value;\n}\n\nField.setValue = function (v) {\n    if (this.value != v) {\n        this.value = v;\n        if (this.listener) this.listener.fieldModified(this);\n    }\n}\nField.toString = function (v) {\n    return this.value != null? this.value.toString(): null;\n}\n\nvar RowList = Object.create(Array.prototype);\nRowList.init = function init() {\n    this.listener = null\n    this.detailfield = null;\n    return this;\n}\n\nRowList.push = function push(obj) {\n    Array.prototype.push.call(this, obj)\n    obj.addListener(this);\n    if (this.listener) this.listener.fieldModified(this);\n}\n\nRowList.fieldModified = function fieldModified(field) {\n    if (this.listener) this.listener.fieldModified(field)\n}\n\nRowList.newRow = function newRow() {\n    return this.detailfield.newRow();\n}\n\nvar DetailField = Object.create(Array.prototype);\nDetailField.init = function(name, description, listener) {\n    this.name = name;\n    this.__description__ = description;\n    this.__rowclass__ = null;\n    this.__removed_rows__ = [];\n    //this.rows = Object.create(RowList).init();\n    //this.rows.parent = listener;\n    //this.rows.detailfield = this;\n    this.listener = listener;\n    return this;\n}\n\nDetailField.getRowClass = function getRowClass() {\n    if (this.__rowclass__ == null) this.__rowclass__ = oo.classmanager.getClass(this.__description__.class);\n    return this.__rowclass__;\n}\n\nDetailField.fieldNames = function fieldNames() {\n    return this.getRowClass().fieldNames();\n}\nDetailField.newRow = function newRow() {\n    return this.getRowClass().new();\n}\n\nDetailField.push = function push(obj) {\n    obj.rowNr = this.length;\n    Array.prototype.push.call(this, obj)\n    obj.addListener(this);\n    if (this.listener) this.listener.fieldModified(this);\n}\n\nDetailField.clear = function clear() {\n    if (this.length != 0) {\n        this.length = 0;\n        if (this.listener) this.listener.fieldModified(this);\n    }\n}\n\nDetailField.splice = function splice() {\n    var self = this;\n    var removed = Array.prototype.splice.apply(this, arguments)\n    removed.forEach(function (element) {self.__removed_rows__.push(element)});\n    if (removed.length >0) {\n        for (var i=removed[0].rowNr; i<self.length; i++) {\n            self[i].rowNr = i;\n        }\n        if (this.listener) this.listener.fieldModified(this);\n    }\n    return removed;\n}\n\nDetailField.fieldModified = function fieldModified(field) {\n    if (this.listener) this.listener.fieldModified(this)\n}\n\nvar RecordListener = Object.create(null);\nRecordListener.init = function (fieldModified) {\n    this.fieldModified = fieldModified;\n    return this;\n}\n\nvar FieldsListener = Object.create(null);\nFieldsListener.receiver = null;\nFieldsListener.fieldModified = function (field) {\n    if (this.receiver != null) this.receiver.fieldModified(field);\n}\n\nvar RecordDescription = {\n    name: 'Embedded_Record',\n    inherits: null,\n    fields: {\n        internalId: {type: \"integer\"},\n    },\n    fieldnames: ['internalId'],\n    detailnames: []\n}\n\nvar Embedded_Record = Object.create({\n    '__super__': null,\n    '__description__': RecordDescription,\n    '__filename__': __filename,\n})\n\nEmbedded_Record.new = function () {\n    return Object.create(this).init();\n}\n\nfunction propFieldGetter(fn)\n{\n    return function () {\n        //console.log(\"getting \" + fn + \" : \" + this.__fields__[fn].getValue())\n        return this.__fields__[fn].getValue()\n    }\n}\n\nfunction propFieldSetter(fn){\n    return function (v) {\n        //console.log(\"setting  \"+  v + \" in \" + fn);\n        return this.__fields__[fn].setValue(v);\n    }\n}\n\nfunction propDetailGetter(fn)\n{\n    return function () {\n        //console.log(\"getting \" + fn + \" : \" + this.__fields__[fn].getValue())\n        return this.__details__[fn]\n    }\n}\n\nEmbedded_Record.createChildClass = function createChildClass(descriptor, filename) {\n    var childclass = Object.create(this)\n    childclass.__description__ = {fields: {}}\n    for (var fn in this.__description__.fields) {\n        childclass.__description__.fields[fn] = this.__description__.fields[fn];\n    }\n    for (var fn in descriptor.fields) {\n        childclass.__description__.fields[fn] = descriptor.fields[fn];\n    }\n    childclass.__description__.name = descriptor.name;\n    childclass.__description__.fieldnames = _(Object.keys(childclass.__description__.fields)).filter(function (fn) {return childclass.__description__.fields[fn].type != 'detail'})\n    childclass.__description__.detailnames =_(Object.keys(childclass.__description__.fields)).filter(function (fn) {return childclass.__description__.fields[fn].type == 'detail'})\n    childclass.__filename__ = filename;\n    childclass.__super__ = this;\n    return childclass;\n}\n\nEmbedded_Record.init = function init() {\n    this.__isnew__ = true;\n    this.__ismodified__ = false;\n    this.__fields__ = {}\n    this.__details__ = {}\n    this.__fieldslistener__ = Object.create(FieldsListener)\n    this.__fieldslistener__.receiver = this;\n    var props = {}\n    this.__listeners__ = [];\n    this.load = this.load.bind(this)\n    this.save = this.save.bind(this)\n    this.delete = this.delete.bind(this)\n    for (var fn in this.__description__.fields) {\n        var fd = this.__description__.fields[fn]\n        if (fd.type != 'detail') {\n            this.__fields__[fn] = Object.create(Field).init(fn, fd.type, fd.length, fd.persistent, fd.linkto);\n            this.__fields__[fn].listener = this.__fieldslistener__;\n            props[fn] = {\n                enumerable: true,\n                get: propFieldGetter(fn),\n                set: propFieldSetter(fn),\n            }\n        } else {\n            this.__details__[fn] = Object.create(DetailField).init(fn, fd, this.__fieldslistener__);\n            props[fn] = {\n                enumerable: true,\n                get: propDetailGetter(fn),\n            }\n        }\n    }\n    Object.defineProperties(this, props)\n    return this;\n}\n\nEmbedded_Record.fieldModified = function(field) {\n    this.setModifiedFlag(true);\n    for (var i=0;i<this.__listeners__.length;i++) {\n        this.__listeners__[i].fieldModified(field);\n    }\n}\n\nEmbedded_Record.addListener = function (listener) {\n    this.__listeners__.push(listener);\n}\n\nEmbedded_Record.fieldNames = function fieldNames() {return this.__description__.fieldnames}\nEmbedded_Record.detailNames = function detailNames() {return this.__description__.detailnames}\nEmbedded_Record.fields = function fields(fn) {return this.__fields__[fn]}\nEmbedded_Record.details = function details(dn) {return this.__details__[dn]}\nEmbedded_Record.hasField = function hasField(fn) {return fn in this.__fields__}\nEmbedded_Record.inspect = function inspect() {\n    return \"<\" + this.__description__.name + \", from \" + this.__filename__+ \">\"\n}\n\nEmbedded_Record.__clearRemovedRows__ = function __clearRemovedRows__() {\n    _(this.__details__).map(function (detail) { detail._removed_rows__ = []})\n}\nEmbedded_Record.save = function save(callback) {\n    var self = this;\n    return self.check()\n        .then(function () {\n            return new Promise(function (resolve, reject) {\n                oo.orm.store(self, function (err) {\n                    if (err) {\n                        console.log(\"err:\" + JSON.stringify(err))\n                        reject(err)\n                    } else {\n                        resolve()\n                    }\n                })\n            });\n        })\n}\n\nEmbedded_Record.check = function check() {\n    console.log(\"en check de record\")\n    //return Promise.reject(\"check failed\")\n    return Promise.resolve();\n}\n\nEmbedded_Record.beforeInsert = function beforeInsert() {\n    return Promise.resolve();\n}\n\nEmbedded_Record.beforeUpdate = function beforeUpdate() {\n    return Promise.resolve();\n}\n\nEmbedded_Record.afterInsert = function afterInsert() {\n    return true;\n}\n\nEmbedded_Record.afterUpdate = function afterUpdate() {\n    return true;\n}\n\n\nEmbedded_Record.delete = function del(callback) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n        oo.orm.delete(self, function (err) {\n            if (err) {\n                reject(err)\n            } else {\n                resolve();\n            }\n        });\n    });\n}\n\n\nEmbedded_Record.load = function load() {\n    console.log(arguments)\n    return oo.orm.load(this);\n}\n\nEmbedded_Record.isNew = function isNew() {\n    return this.__isnew__;\n}\n\nEmbedded_Record.setNewFlag = function setNewFlag(b) {\n    return this.__isnew__ = b;\n}\n\nEmbedded_Record.isModified = function isModified() {\n    return this.__ismodified__;\n}\n\nEmbedded_Record.setModifiedFlag = function setModifiedFlag(b) {\n    this.__ismodified__ = b;\n}\n\nEmbedded_Record.setNewFlag = function setNewFlag(b) {\n    return this.__isnew__ = b;\n}\n\nEmbedded_Record.toJSON = function toJSON() {\n    var obj = {\n        __classname__: this.__description__.name,\n        __isnew__: this.__isnew__,\n        __ismodified__: this.__ismodified__\n    }\n    var fieldnames = this.fieldNames();\n    for (var i=0;i<fieldnames.length;i++) {\n        var fn = fieldnames[i];\n        obj[fn] = this[fn];\n    }\n    var detailnames = this.detailNames();\n    for (var i=0;i<detailnames.length;i++) {\n        var dn = detailnames[i];\n        obj[dn] = [];\n        var detail = this[dn];\n        for (var j=0;j<detail.length;j++) {\n            obj[dn].push(this[dn][j].toJSON())\n        }\n    }\n\n    return obj;\n}\n\nEmbedded_Record.fromJSON = function fromJSON(obj, rec) {\n    if (typeof obj == \"string\") obj = JSON.parse(obj);\n    if (rec == null) rec = oo.classmanager.getClass(obj.__classname__).new();\n    var fieldnames = rec.fieldNames();\n    for (var i=0;i<fieldnames.length;i++) {\n        var fn = fieldnames[i];\n        rec[fn] = obj[fn]\n    }\n    var detailnames = rec.detailNames();\n    for (var i=0;i<detailnames.length;i++) {\n        var dn = detailnames[i];\n        var detail = rec[dn];\n        detail.clear();\n        for (var j=0;j<obj[dn].length;j++) {\n            detail.push(detail.getRowClass().fromJSON(obj[dn][j]))\n        }\n    }\n    rec.setNewFlag(obj.__isnew__)\n    rec.setModifiedFlag(obj.__ismodified__)\n    return rec;\n}\n\nmodule.exports = Embedded_Record\n"]}