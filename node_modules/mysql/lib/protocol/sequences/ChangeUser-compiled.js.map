{"version":3,"sources":["ChangeUser.js"],"names":[],"mappings":"AAAA,IAAI,WAAW,QAAQ,YAAR,CAAf;AACA,IAAI,OAAW,QAAQ,MAAR,CAAf;AACA,IAAI,UAAW,QAAQ,YAAR,CAAf;AACA,IAAI,OAAW,QAAQ,SAAR,CAAf;;AAEA,OAAO,OAAP,GAAiB,UAAjB;AACA,KAAK,QAAL,CAAc,UAAd,EAA0B,QAA1B;AACA,SAAS,UAAT,CAAoB,OAApB,EAA6B,QAA7B,EAAuC;AACrC,WAAS,IAAT,CAAc,IAAd,EAAoB,OAApB,EAA6B,QAA7B;;AAEA,OAAK,KAAL,GAAsB,QAAQ,IAA9B;AACA,OAAK,SAAL,GAAsB,QAAQ,QAA9B;AACA,OAAK,SAAL,GAAsB,QAAQ,QAA9B;AACA,OAAK,cAAL,GAAsB,QAAQ,aAA9B;AACA,OAAK,cAAL,GAAsB,QAAQ,aAA9B;AACD;;AAED,WAAW,SAAX,CAAqB,KAArB,GAA6B,UAAS,6BAAT,EAAwC;AACnE,MAAI,eAAe,8BAA8B,YAA9B,EAAnB;AACA,iBAAmB,KAAK,KAAL,CAAW,KAAK,SAAhB,EAA2B,YAA3B,CAAnB;;AAEA,MAAI,SAAS,IAAI,QAAQ,mBAAZ,CAAgC;AAC3C,UAAgB,KAAK,KADsB;AAE3C,kBAAgB,YAF2B;AAG3C,cAAgB,KAAK,SAHsB;AAI3C,mBAAgB,KAAK;AAJsB,GAAhC,CAAb;;AAOA,OAAK,cAAL,CAAoB,IAApB,GAAoC,KAAK,KAAzC;AACA,OAAK,cAAL,CAAoB,QAApB,GAAoC,KAAK,SAAzC;AACA,OAAK,cAAL,CAAoB,QAApB,GAAoC,KAAK,SAAzC;AACA,OAAK,cAAL,CAAoB,aAApB,GAAoC,KAAK,cAAzC;;AAEA,OAAK,IAAL,CAAU,QAAV,EAAoB,MAApB;AACD,CAjBD;;AAmBA,WAAW,SAAX,CAAqB,aAArB,IAAsC,UAAS,MAAT,EAAiB;AACrD,MAAI,MAAM,KAAK,cAAL,CAAoB,MAApB,CAAV;AACA,MAAI,KAAJ,GAAY,IAAZ;AACA,OAAK,GAAL,CAAS,GAAT;AACD,CAJD","file":"ChangeUser-compiled.js","sourcesContent":["var Sequence = require('./Sequence');\nvar Util     = require('util');\nvar Packets  = require('../packets');\nvar Auth     = require('../Auth');\n\nmodule.exports = ChangeUser;\nUtil.inherits(ChangeUser, Sequence);\nfunction ChangeUser(options, callback) {\n  Sequence.call(this, options, callback);\n\n  this._user          = options.user;\n  this._password      = options.password;\n  this._database      = options.database;\n  this._charsetNumber = options.charsetNumber;\n  this._currentConfig = options.currentConfig;\n}\n\nChangeUser.prototype.start = function(handshakeInitializationPacket) {\n  var scrambleBuff = handshakeInitializationPacket.scrambleBuff();\n  scrambleBuff     = Auth.token(this._password, scrambleBuff);\n\n  var packet = new Packets.ComChangeUserPacket({\n    user          : this._user,\n    scrambleBuff  : scrambleBuff,\n    database      : this._database,\n    charsetNumber : this._charsetNumber\n  });\n\n  this._currentConfig.user          = this._user;\n  this._currentConfig.password      = this._password;\n  this._currentConfig.database      = this._database;\n  this._currentConfig.charsetNumber = this._charsetNumber;\n\n  this.emit('packet', packet);\n};\n\nChangeUser.prototype['ErrorPacket'] = function(packet) {\n  var err = this._packetToError(packet);\n  err.fatal = true;\n  this.end(err);\n};\n"]}