{"version":3,"sources":["ErrorPacket.js"],"names":[],"mappings":"AAAA,OAAO,OAAP,GAAiB,WAAjB;AACA,SAAS,WAAT,CAAqB,OAArB,EAA8B;AAC5B,YAAU,WAAW,EAArB;;AAEA,OAAK,UAAL,GAAsB,QAAQ,UAA9B;AACA,OAAK,KAAL,GAAsB,QAAQ,KAA9B;AACA,OAAK,cAAL,GAAsB,QAAQ,cAA9B;AACA,OAAK,QAAL,GAAsB,QAAQ,QAA9B;AACA,OAAK,OAAL,GAAsB,QAAQ,OAA9B;AACD;;AAED,YAAY,SAAZ,CAAsB,KAAtB,GAA8B,UAAS,MAAT,EAAiB;AAC7C,OAAK,UAAL,GAAkB,OAAO,mBAAP,CAA2B,CAA3B,CAAlB;AACA,OAAK,KAAL,GAAkB,OAAO,mBAAP,CAA2B,CAA3B,CAAlB;;;AAGA,MAAI,OAAO,IAAP,OAAkB,IAAtB,EAA4B;AAC1B,SAAK,cAAL,GAAsB,OAAO,WAAP,CAAmB,CAAnB,CAAtB;AACA,SAAK,QAAL,GAAsB,OAAO,WAAP,CAAmB,CAAnB,CAAtB;AACD;;AAED,OAAK,OAAL,GAAe,OAAO,2BAAP,EAAf;AACD,CAXD;;AAaA,YAAY,SAAZ,CAAsB,KAAtB,GAA8B,UAAS,MAAT,EAAiB;AAC7C,SAAO,mBAAP,CAA2B,CAA3B,EAA8B,IAA9B;AACA,SAAO,mBAAP,CAA2B,CAA3B,EAA8B,KAAK,KAAnC;;AAEA,MAAI,KAAK,cAAT,EAAyB;AACvB,WAAO,WAAP,CAAmB,KAAK,cAAxB;AACA,WAAO,WAAP,CAAmB,KAAK,QAAxB;AACD;;AAED,SAAO,WAAP,CAAmB,KAAK,OAAxB;AACD,CAVD","file":"ErrorPacket-compiled.js","sourcesContent":["module.exports = ErrorPacket;\nfunction ErrorPacket(options) {\n  options = options || {};\n\n  this.fieldCount     = options.fieldCount;\n  this.errno          = options.errno;\n  this.sqlStateMarker = options.sqlStateMarker;\n  this.sqlState       = options.sqlState;\n  this.message        = options.message;\n}\n\nErrorPacket.prototype.parse = function(parser) {\n  this.fieldCount = parser.parseUnsignedNumber(1);\n  this.errno      = parser.parseUnsignedNumber(2);\n\n  // sqlStateMarker ('#' = 0x23) indicates error packet format\n  if (parser.peak() === 0x23) {\n    this.sqlStateMarker = parser.parseString(1);\n    this.sqlState       = parser.parseString(5);\n  }\n\n  this.message = parser.parsePacketTerminatedString();\n};\n\nErrorPacket.prototype.write = function(writer) {\n  writer.writeUnsignedNumber(1, 0xff);\n  writer.writeUnsignedNumber(2, this.errno);\n\n  if (this.sqlStateMarker) {\n    writer.writeString(this.sqlStateMarker);\n    writer.writeString(this.sqlState);\n  }\n\n  writer.writeString(this.message);\n};\n"]}