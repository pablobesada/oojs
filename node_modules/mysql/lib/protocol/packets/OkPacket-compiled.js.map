{"version":3,"sources":["OkPacket.js"],"names":[],"mappings":"AAAA,OAAO,OAAP,GAAiB,QAAjB;AACA,SAAS,QAAT,CAAkB,OAAlB,EAA2B;AACzB,YAAU,WAAW,EAArB;;AAEA,OAAK,UAAL,GAAoB,SAApB;AACA,OAAK,YAAL,GAAoB,SAApB;AACA,OAAK,QAAL,GAAoB,SAApB;AACA,OAAK,YAAL,GAAoB,SAApB;AACA,OAAK,YAAL,GAAoB,SAApB;AACA,OAAK,OAAL,GAAoB,SAApB;AACA,OAAK,UAAL,GAAoB,QAAQ,UAA5B;AACD;;AAED,SAAS,SAAT,CAAmB,KAAnB,GAA2B,UAAS,MAAT,EAAiB;AAC1C,OAAK,UAAL,GAAoB,OAAO,mBAAP,CAA2B,CAA3B,CAApB;AACA,OAAK,YAAL,GAAoB,OAAO,sBAAP,EAApB;AACA,OAAK,QAAL,GAAoB,OAAO,sBAAP,EAApB;AACA,MAAI,KAAK,UAAT,EAAqB;AACnB,SAAK,YAAL,GAAoB,OAAO,mBAAP,CAA2B,CAA3B,CAApB;AACA,SAAK,YAAL,GAAoB,OAAO,mBAAP,CAA2B,CAA3B,CAApB;AACD;AACD,OAAK,OAAL,GAAoB,OAAO,2BAAP,EAApB;AACA,OAAK,WAAL,GAAoB,CAApB;;AAEA,MAAI,IAAI,KAAK,OAAL,CAAa,KAAb,CAAmB,qBAAnB,CAAR;;AAEA,MAAI,MAAM,IAAV,EAAgB;AACd,SAAK,WAAL,GAAmB,SAAS,EAAE,CAAF,CAAT,EAAe,EAAf,CAAnB;AACD;AACF,CAhBD;;AAkBA,SAAS,SAAT,CAAmB,KAAnB,GAA2B,UAAS,MAAT,EAAiB;AAC1C,SAAO,mBAAP,CAA2B,CAA3B,EAA8B,IAA9B;AACA,SAAO,sBAAP,CAA8B,KAAK,YAAL,IAAqB,CAAnD;AACA,SAAO,sBAAP,CAA8B,KAAK,QAAL,IAAiB,CAA/C;AACA,MAAI,KAAK,UAAT,EAAqB;AACnB,WAAO,mBAAP,CAA2B,CAA3B,EAA8B,KAAK,YAAL,IAAqB,CAAnD;AACA,WAAO,mBAAP,CAA2B,CAA3B,EAA8B,KAAK,YAAL,IAAqB,CAAnD;AACD;AACD,SAAO,WAAP,CAAmB,KAAK,OAAxB;AACD,CATD","file":"OkPacket-compiled.js","sourcesContent":["module.exports = OkPacket;\nfunction OkPacket(options) {\n  options = options || {};\n\n  this.fieldCount   = undefined;\n  this.affectedRows = undefined;\n  this.insertId     = undefined;\n  this.serverStatus = undefined;\n  this.warningCount = undefined;\n  this.message      = undefined;\n  this.protocol41   = options.protocol41;\n}\n\nOkPacket.prototype.parse = function(parser) {\n  this.fieldCount   = parser.parseUnsignedNumber(1);\n  this.affectedRows = parser.parseLengthCodedNumber();\n  this.insertId     = parser.parseLengthCodedNumber();\n  if (this.protocol41) {\n    this.serverStatus = parser.parseUnsignedNumber(2);\n    this.warningCount = parser.parseUnsignedNumber(2);\n  }\n  this.message      = parser.parsePacketTerminatedString();\n  this.changedRows  = 0;\n\n  var m = this.message.match(/\\schanged:\\s*(\\d+)/i);\n\n  if (m !== null) {\n    this.changedRows = parseInt(m[1], 10);\n  }\n};\n\nOkPacket.prototype.write = function(writer) {\n  writer.writeUnsignedNumber(1, 0x00);\n  writer.writeLengthCodedNumber(this.affectedRows || 0);\n  writer.writeLengthCodedNumber(this.insertId || 0);\n  if (this.protocol41) {\n    writer.writeUnsignedNumber(2, this.serverStatus || 0);\n    writer.writeUnsignedNumber(2, this.warningCount || 0);\n  }\n  writer.writeString(this.message);\n};\n"]}