{"version":3,"sources":["FieldPacket.js"],"names":[],"mappings":"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","file":"FieldPacket-compiled.js","sourcesContent":["module.exports = FieldPacket;\nfunction FieldPacket(options) {\n  options = options || {};\n\n  this.catalog    = options.catalog;\n  this.db         = options.db;\n  this.table      = options.table;\n  this.orgTable   = options.orgTable;\n  this.name       = options.name;\n  this.orgName    = options.orgName;\n  this.charsetNr  = options.charsetNr;\n  this.length     = options.length;\n  this.type       = options.type;\n  this.flags      = options.flags;\n  this.decimals   = options.decimals;\n  this.default    = options.default;\n  this.zeroFill   = options.zeroFill;\n  this.protocol41 = options.protocol41;\n}\n\nFieldPacket.prototype.parse = function(parser) {\n  if (this.protocol41) {\n    this.catalog     = parser.parseLengthCodedString();\n    this.db          = parser.parseLengthCodedString();\n    this.table       = parser.parseLengthCodedString();\n    this.orgTable    = parser.parseLengthCodedString();\n    this.name        = parser.parseLengthCodedString();\n    this.orgName     = parser.parseLengthCodedString();\n\n    if (parser.parseLengthCodedNumber() !== 0x0c) {\n      var err  = new TypeError('Received invalid field length');\n      err.code = 'PARSER_INVALID_FIELD_LENGTH';\n      throw err;\n    }\n\n    this.charsetNr   = parser.parseUnsignedNumber(2);\n    this.length      = parser.parseUnsignedNumber(4);\n    this.type        = parser.parseUnsignedNumber(1);\n    this.flags       = parser.parseUnsignedNumber(2);\n    this.decimals    = parser.parseUnsignedNumber(1);\n\n    var filler       = parser.parseBuffer(2);\n    if (filler[0] !== 0x0 || filler[1] !== 0x0) {\n      var err  = new TypeError('Received invalid filler');\n      err.code = 'PARSER_INVALID_FILLER';\n      throw err;\n    }\n\n    // parsed flags\n    this.zeroFill    = (this.flags & 0x0040 ? true : false);\n\n    if (parser.reachedPacketEnd()) {\n      return;\n    }\n\n    this.default     = parser.parseLengthCodedString();\n  } else {\n    this.table       = parser.parseLengthCodedString();\n    this.name        = parser.parseLengthCodedString();\n    this.length      = parser.parseUnsignedNumber(parser.parseUnsignedNumber(1));\n    this.type        = parser.parseUnsignedNumber(parser.parseUnsignedNumber(1));\n  }\n};\n\nFieldPacket.prototype.write = function(writer) {\n  if (this.protocol41) {\n    writer.writeLengthCodedString(this.catalog);\n    writer.writeLengthCodedString(this.db);\n    writer.writeLengthCodedString(this.table);\n    writer.writeLengthCodedString(this.orgTable);\n    writer.writeLengthCodedString(this.name);\n    writer.writeLengthCodedString(this.orgName);\n\n    writer.writeLengthCodedNumber(0x0c);\n    writer.writeUnsignedNumber(2, this.charsetNr || 0);\n    writer.writeUnsignedNumber(4, this.length || 0);\n    writer.writeUnsignedNumber(1, this.type || 0);\n    writer.writeUnsignedNumber(2, this.flags || 0);\n    writer.writeUnsignedNumber(1, this.decimals || 0);\n    writer.writeFiller(2);\n\n    if (this.default !== undefined) {\n      writer.writeLengthCodedString(this.default);\n    }\n  } else {\n    writer.writeLengthCodedString(this.table);\n    writer.writeLengthCodedString(this.name);\n    writer.writeUnsignedNumber(1, 0x01);\n    writer.writeUnsignedNumber(1, this.length);\n    writer.writeUnsignedNumber(1, 0x01);\n    writer.writeUnsignedNumber(1, this.type);\n  }\n};\n"]}