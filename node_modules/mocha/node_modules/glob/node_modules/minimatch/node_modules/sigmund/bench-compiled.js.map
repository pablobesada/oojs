{"version":3,"sources":["bench.js"],"names":[],"mappings":"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","file":"bench-compiled.js","sourcesContent":["// different ways to id objects\n// use a req/res pair, since it's crazy deep and cyclical\n\n// sparseFE10 and sigmund are usually pretty close, which is to be expected,\n// since they are essentially the same algorithm, except that sigmund handles\n// regular expression objects properly.\n\n\nvar http = require('http')\nvar util = require('util')\nvar sigmund = require('./sigmund.js')\nvar sreq, sres, creq, cres, test\n\nhttp.createServer(function (q, s) {\n  sreq = q\n  sres = s\n  sres.end('ok')\n  this.close(function () { setTimeout(function () {\n    start()\n  }, 200) })\n}).listen(1337, function () {\n  creq = http.get({ port: 1337 })\n  creq.on('response', function (s) { cres = s })\n})\n\nfunction start () {\n  test = [sreq, sres, creq, cres]\n  // test = sreq\n  // sreq.sres = sres\n  // sreq.creq = creq\n  // sreq.cres = cres\n\n  for (var i in exports.compare) {\n    console.log(i)\n    var hash = exports.compare[i]()\n    console.log(hash)\n    console.log(hash.length)\n    console.log('')\n  }\n\n  require('bench').runMain()\n}\n\nfunction customWs (obj, md, d) {\n  d = d || 0\n  var to = typeof obj\n  if (to === 'undefined' || to === 'function' || to === null) return ''\n  if (d > md || !obj || to !== 'object') return ('' + obj).replace(/[\\n ]+/g, '')\n\n  if (Array.isArray(obj)) {\n    return obj.map(function (i, _, __) {\n      return customWs(i, md, d + 1)\n    }).reduce(function (a, b) { return a + b }, '')\n  }\n\n  var keys = Object.keys(obj)\n  return keys.map(function (k, _, __) {\n    return k + ':' + customWs(obj[k], md, d + 1)\n  }).reduce(function (a, b) { return a + b }, '')\n}\n\nfunction custom (obj, md, d) {\n  d = d || 0\n  var to = typeof obj\n  if (to === 'undefined' || to === 'function' || to === null) return ''\n  if (d > md || !obj || to !== 'object') return '' + obj\n\n  if (Array.isArray(obj)) {\n    return obj.map(function (i, _, __) {\n      return custom(i, md, d + 1)\n    }).reduce(function (a, b) { return a + b }, '')\n  }\n\n  var keys = Object.keys(obj)\n  return keys.map(function (k, _, __) {\n    return k + ':' + custom(obj[k], md, d + 1)\n  }).reduce(function (a, b) { return a + b }, '')\n}\n\nfunction sparseFE2 (obj, maxDepth) {\n  var seen = []\n  var soFar = ''\n  function ch (v, depth) {\n    if (depth > maxDepth) return\n    if (typeof v === 'function' || typeof v === 'undefined') return\n    if (typeof v !== 'object' || !v) {\n      soFar += v\n      return\n    }\n    if (seen.indexOf(v) !== -1 || depth === maxDepth) return\n    seen.push(v)\n    soFar += '{'\n    Object.keys(v).forEach(function (k, _, __) {\n      // pseudo-private values.  skip those.\n      if (k.charAt(0) === '_') return\n      var to = typeof v[k]\n      if (to === 'function' || to === 'undefined') return\n      soFar += k + ':'\n      ch(v[k], depth + 1)\n    })\n    soFar += '}'\n  }\n  ch(obj, 0)\n  return soFar\n}\n\nfunction sparseFE (obj, maxDepth) {\n  var seen = []\n  var soFar = ''\n  function ch (v, depth) {\n    if (depth > maxDepth) return\n    if (typeof v === 'function' || typeof v === 'undefined') return\n    if (typeof v !== 'object' || !v) {\n      soFar += v\n      return\n    }\n    if (seen.indexOf(v) !== -1 || depth === maxDepth) return\n    seen.push(v)\n    soFar += '{'\n    Object.keys(v).forEach(function (k, _, __) {\n      // pseudo-private values.  skip those.\n      if (k.charAt(0) === '_') return\n      var to = typeof v[k]\n      if (to === 'function' || to === 'undefined') return\n      soFar += k\n      ch(v[k], depth + 1)\n    })\n  }\n  ch(obj, 0)\n  return soFar\n}\n\nfunction sparse (obj, maxDepth) {\n  var seen = []\n  var soFar = ''\n  function ch (v, depth) {\n    if (depth > maxDepth) return\n    if (typeof v === 'function' || typeof v === 'undefined') return\n    if (typeof v !== 'object' || !v) {\n      soFar += v\n      return\n    }\n    if (seen.indexOf(v) !== -1 || depth === maxDepth) return\n    seen.push(v)\n    soFar += '{'\n    for (var k in v) {\n      // pseudo-private values.  skip those.\n      if (k.charAt(0) === '_') continue\n      var to = typeof v[k]\n      if (to === 'function' || to === 'undefined') continue\n      soFar += k\n      ch(v[k], depth + 1)\n    }\n  }\n  ch(obj, 0)\n  return soFar\n}\n\nfunction noCommas (obj, maxDepth) {\n  var seen = []\n  var soFar = ''\n  function ch (v, depth) {\n    if (depth > maxDepth) return\n    if (typeof v === 'function' || typeof v === 'undefined') return\n    if (typeof v !== 'object' || !v) {\n      soFar += v\n      return\n    }\n    if (seen.indexOf(v) !== -1 || depth === maxDepth) return\n    seen.push(v)\n    soFar += '{'\n    for (var k in v) {\n      // pseudo-private values.  skip those.\n      if (k.charAt(0) === '_') continue\n      var to = typeof v[k]\n      if (to === 'function' || to === 'undefined') continue\n      soFar += k + ':'\n      ch(v[k], depth + 1)\n    }\n    soFar += '}'\n  }\n  ch(obj, 0)\n  return soFar\n}\n\n\nfunction flatten (obj, maxDepth) {\n  var seen = []\n  var soFar = ''\n  function ch (v, depth) {\n    if (depth > maxDepth) return\n    if (typeof v === 'function' || typeof v === 'undefined') return\n    if (typeof v !== 'object' || !v) {\n      soFar += v\n      return\n    }\n    if (seen.indexOf(v) !== -1 || depth === maxDepth) return\n    seen.push(v)\n    soFar += '{'\n    for (var k in v) {\n      // pseudo-private values.  skip those.\n      if (k.charAt(0) === '_') continue\n      var to = typeof v[k]\n      if (to === 'function' || to === 'undefined') continue\n      soFar += k + ':'\n      ch(v[k], depth + 1)\n      soFar += ','\n    }\n    soFar += '}'\n  }\n  ch(obj, 0)\n  return soFar\n}\n\nexports.compare =\n{\n  // 'custom 2': function () {\n  //   return custom(test, 2, 0)\n  // },\n  // 'customWs 2': function () {\n  //   return customWs(test, 2, 0)\n  // },\n  'JSON.stringify (guarded)': function () {\n    var seen = []\n    return JSON.stringify(test, function (k, v) {\n      if (typeof v !== 'object' || !v) return v\n      if (seen.indexOf(v) !== -1) return undefined\n      seen.push(v)\n      return v\n    })\n  },\n\n  'flatten 10': function () {\n    return flatten(test, 10)\n  },\n\n  // 'flattenFE 10': function () {\n  //   return flattenFE(test, 10)\n  // },\n\n  'noCommas 10': function () {\n    return noCommas(test, 10)\n  },\n\n  'sparse 10': function () {\n    return sparse(test, 10)\n  },\n\n  'sparseFE 10': function () {\n    return sparseFE(test, 10)\n  },\n\n  'sparseFE2 10': function () {\n    return sparseFE2(test, 10)\n  },\n\n  sigmund: function() {\n    return sigmund(test, 10)\n  },\n\n\n  // 'util.inspect 1': function () {\n  //   return util.inspect(test, false, 1, false)\n  // },\n  // 'util.inspect undefined': function () {\n  //   util.inspect(test)\n  // },\n  // 'util.inspect 2': function () {\n  //   util.inspect(test, false, 2, false)\n  // },\n  // 'util.inspect 3': function () {\n  //   util.inspect(test, false, 3, false)\n  // },\n  // 'util.inspect 4': function () {\n  //   util.inspect(test, false, 4, false)\n  // },\n  // 'util.inspect Infinity': function () {\n  //   util.inspect(test, false, Infinity, false)\n  // }\n}\n\n/** results\n**/\n"]}