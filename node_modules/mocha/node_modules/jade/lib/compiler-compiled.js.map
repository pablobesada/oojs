{"version":3,"sources":["compiler.js"],"names":[],"mappings":"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","file":"compiler-compiled.js","sourcesContent":["\n/*!\n * Jade - Compiler\n * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nvar nodes = require('./nodes')\n  , filters = require('./filters')\n  , doctypes = require('./doctypes')\n  , selfClosing = require('./self-closing')\n  , runtime = require('./runtime')\n  , utils = require('./utils');\n\n// if browser\n//\n// if (!Object.keys) {\n//   Object.keys = function(obj){\n//     var arr = [];\n//     for (var key in obj) {\n//       if (obj.hasOwnProperty(key)) {\n//         arr.push(key);\n//       }\n//     }\n//     return arr;\n//   }\n// }\n//\n// if (!String.prototype.trimLeft) {\n//   String.prototype.trimLeft = function(){\n//     return this.replace(/^\\s+/, '');\n//   }\n// }\n//\n// end\n\n\n/**\n * Initialize `Compiler` with the given `node`.\n *\n * @param {Node} node\n * @param {Object} options\n * @api public\n */\n\nvar Compiler = module.exports = function Compiler(node, options) {\n  this.options = options = options || {};\n  this.node = node;\n  this.hasCompiledDoctype = false;\n  this.hasCompiledTag = false;\n  this.pp = options.pretty || false;\n  this.debug = false !== options.compileDebug;\n  this.indents = 0;\n  this.parentIndents = 0;\n  if (options.doctype) this.setDoctype(options.doctype);\n};\n\n/**\n * Compiler prototype.\n */\n\nCompiler.prototype = {\n\n  /**\n   * Compile parse tree to JavaScript.\n   *\n   * @api public\n   */\n\n  compile: function(){\n    this.buf = ['var interp;'];\n    if (this.pp) this.buf.push(\"var __indent = [];\");\n    this.lastBufferedIdx = -1;\n    this.visit(this.node);\n    return this.buf.join('\\n');\n  },\n\n  /**\n   * Sets the default doctype `name`. Sets terse mode to `true` when\n   * html 5 is used, causing self-closing tags to end with \">\" vs \"/>\",\n   * and boolean attributes are not mirrored.\n   *\n   * @param {string} name\n   * @api public\n   */\n\n  setDoctype: function(name){\n    var doctype = doctypes[(name || 'default').toLowerCase()];\n    doctype = doctype || '<!DOCTYPE ' + name + '>';\n    this.doctype = doctype;\n    this.terse = '5' == name || 'html' == name;\n    this.xml = 0 == this.doctype.indexOf('<?xml');\n  },\n\n  /**\n   * Buffer the given `str` optionally escaped.\n   *\n   * @param {String} str\n   * @param {Boolean} esc\n   * @api public\n   */\n\n  buffer: function(str, esc){\n    if (esc) str = utils.escape(str);\n\n    if (this.lastBufferedIdx == this.buf.length) {\n      this.lastBuffered += str;\n      this.buf[this.lastBufferedIdx - 1] = \"buf.push('\" + this.lastBuffered + \"');\"\n    } else {\n      this.buf.push(\"buf.push('\" + str + \"');\");\n      this.lastBuffered = str;\n      this.lastBufferedIdx = this.buf.length;\n    }\n  },\n\n  /**\n   * Buffer an indent based on the current `indent`\n   * property and an additional `offset`.\n   *\n   * @param {Number} offset\n   * @param {Boolean} newline\n   * @api public\n   */\n  \n  prettyIndent: function(offset, newline){\n    offset = offset || 0;\n    newline = newline ? '\\\\n' : '';\n    this.buffer(newline + Array(this.indents + offset).join('  '));\n    if (this.parentIndents)\n      this.buf.push(\"buf.push.apply(buf, __indent);\");\n  },\n\n  /**\n   * Visit `node`.\n   *\n   * @param {Node} node\n   * @api public\n   */\n\n  visit: function(node){\n    var debug = this.debug;\n\n    if (debug) {\n      this.buf.push('__jade.unshift({ lineno: ' + node.line\n        + ', filename: ' + (node.filename\n          ? JSON.stringify(node.filename)\n          : '__jade[0].filename')\n        + ' });');\n    }\n\n    // Massive hack to fix our context\n    // stack for - else[ if] etc\n    if (false === node.debug && this.debug) {\n      this.buf.pop();\n      this.buf.pop();\n    }\n\n    this.visitNode(node);\n\n    if (debug) this.buf.push('__jade.shift();');\n  },\n\n  /**\n   * Visit `node`.\n   *\n   * @param {Node} node\n   * @api public\n   */\n\n  visitNode: function(node){\n    var name = node.constructor.name\n      || node.constructor.toString().match(/function ([^(\\s]+)()/)[1];\n    return this['visit' + name](node);\n  },\n\n  /**\n   * Visit case `node`.\n   *\n   * @param {Literal} node\n   * @api public\n   */\n\n  visitCase: function(node){\n    var _ = this.withinCase;\n    this.withinCase = true;\n    this.buf.push('switch (' + node.expr + '){');\n    this.visit(node.block);\n    this.buf.push('}');\n    this.withinCase = _;\n  },\n\n  /**\n   * Visit when `node`.\n   *\n   * @param {Literal} node\n   * @api public\n   */\n\n  visitWhen: function(node){\n    if ('default' == node.expr) {\n      this.buf.push('default:');\n    } else {\n      this.buf.push('case ' + node.expr + ':');\n    }\n    this.visit(node.block);\n    this.buf.push('  break;');\n  },\n\n  /**\n   * Visit literal `node`.\n   *\n   * @param {Literal} node\n   * @api public\n   */\n\n  visitLiteral: function(node){\n    var str = node.str.replace(/\\n/g, '\\\\\\\\n');\n    this.buffer(str);\n  },\n\n  /**\n   * Visit all nodes in `block`.\n   *\n   * @param {Block} block\n   * @api public\n   */\n\n  visitBlock: function(block){\n    var len = block.nodes.length\n      , escape = this.escape\n      , pp = this.pp\n    \n    // Block keyword has a special meaning in mixins\n    if (this.parentIndents && block.mode) {\n      if (pp) this.buf.push(\"__indent.push('\" + Array(this.indents + 1).join('  ') + \"');\")\n      this.buf.push('block && block();');\n      if (pp) this.buf.push(\"__indent.pop();\")\n      return;\n    }\n    \n    // Pretty print multi-line text\n    if (pp && len > 1 && !escape && block.nodes[0].isText && block.nodes[1].isText)\n      this.prettyIndent(1, true);\n    \n    for (var i = 0; i < len; ++i) {\n      // Pretty print text\n      if (pp && i > 0 && !escape && block.nodes[i].isText && block.nodes[i-1].isText)\n        this.prettyIndent(1, false);\n      \n      this.visit(block.nodes[i]);\n      // Multiple text nodes are separated by newlines\n      if (block.nodes[i+1] && block.nodes[i].isText && block.nodes[i+1].isText)\n        this.buffer('\\\\n');\n    }\n  },\n\n  /**\n   * Visit `doctype`. Sets terse mode to `true` when html 5\n   * is used, causing self-closing tags to end with \">\" vs \"/>\",\n   * and boolean attributes are not mirrored.\n   *\n   * @param {Doctype} doctype\n   * @api public\n   */\n\n  visitDoctype: function(doctype){\n    if (doctype && (doctype.val || !this.doctype)) {\n      this.setDoctype(doctype.val || 'default');\n    }\n\n    if (this.doctype) this.buffer(this.doctype);\n    this.hasCompiledDoctype = true;\n  },\n\n  /**\n   * Visit `mixin`, generating a function that\n   * may be called within the template.\n   *\n   * @param {Mixin} mixin\n   * @api public\n   */\n\n  visitMixin: function(mixin){\n    var name = mixin.name.replace(/-/g, '_') + '_mixin'\n      , args = mixin.args || ''\n      , block = mixin.block\n      , attrs = mixin.attrs\n      , pp = this.pp;\n\n    if (mixin.call) {\n      if (pp) this.buf.push(\"__indent.push('\" + Array(this.indents + 1).join('  ') + \"');\")\n      if (block || attrs.length) {\n        \n        this.buf.push(name + '.call({');\n        \n        if (block) {\n          this.buf.push('block: function(){');\n          \n          // Render block with no indents, dynamically added when rendered\n          this.parentIndents++;\n          var _indents = this.indents;\n          this.indents = 0;\n          this.visit(mixin.block);\n          this.indents = _indents;\n          this.parentIndents--;\n          \n          if (attrs.length) {\n            this.buf.push('},');\n          } else {\n            this.buf.push('}');\n          }\n        }\n        \n        if (attrs.length) {\n          var val = this.attrs(attrs);\n          if (val.inherits) {\n            this.buf.push('attributes: merge({' + val.buf\n                + '}, attributes), escaped: merge(' + val.escaped + ', escaped, true)');\n          } else {\n            this.buf.push('attributes: {' + val.buf + '}, escaped: ' + val.escaped);\n          }\n        }\n        \n        if (args) {\n          this.buf.push('}, ' + args + ');');\n        } else {\n          this.buf.push('});');\n        }\n        \n      } else {\n        this.buf.push(name + '(' + args + ');');\n      }\n      if (pp) this.buf.push(\"__indent.pop();\")\n    } else {\n      this.buf.push('var ' + name + ' = function(' + args + '){');\n      this.buf.push('var block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};');\n      this.parentIndents++;\n      this.visit(block);\n      this.parentIndents--;\n      this.buf.push('};');\n    }\n  },\n\n  /**\n   * Visit `tag` buffering tag markup, generating\n   * attributes, visiting the `tag`'s code and block.\n   *\n   * @param {Tag} tag\n   * @api public\n   */\n\n  visitTag: function(tag){\n    this.indents++;\n    var name = tag.name\n      , pp = this.pp;\n\n    if (tag.buffer) name = \"' + (\" + name + \") + '\";\n\n    if (!this.hasCompiledTag) {\n      if (!this.hasCompiledDoctype && 'html' == name) {\n        this.visitDoctype();\n      }\n      this.hasCompiledTag = true;\n    }\n\n    // pretty print\n    if (pp && !tag.isInline())\n      this.prettyIndent(0, true);\n\n    if ((~selfClosing.indexOf(name) || tag.selfClosing) && !this.xml) {\n      this.buffer('<' + name);\n      this.visitAttributes(tag.attrs);\n      this.terse\n        ? this.buffer('>')\n        : this.buffer('/>');\n    } else {\n      // Optimize attributes buffering\n      if (tag.attrs.length) {\n        this.buffer('<' + name);\n        if (tag.attrs.length) this.visitAttributes(tag.attrs);\n        this.buffer('>');\n      } else {\n        this.buffer('<' + name + '>');\n      }\n      if (tag.code) this.visitCode(tag.code);\n      this.escape = 'pre' == tag.name;\n      this.visit(tag.block);\n\n      // pretty print\n      if (pp && !tag.isInline() && 'pre' != tag.name && !tag.canInline())\n        this.prettyIndent(0, true);\n\n      this.buffer('</' + name + '>');\n    }\n    this.indents--;\n  },\n\n  /**\n   * Visit `filter`, throwing when the filter does not exist.\n   *\n   * @param {Filter} filter\n   * @api public\n   */\n\n  visitFilter: function(filter){\n    var fn = filters[filter.name];\n\n    // unknown filter\n    if (!fn) {\n      if (filter.isASTFilter) {\n        throw new Error('unknown ast filter \"' + filter.name + ':\"');\n      } else {\n        throw new Error('unknown filter \":' + filter.name + '\"');\n      }\n    }\n\n    if (filter.isASTFilter) {\n      this.buf.push(fn(filter.block, this, filter.attrs));\n    } else {\n      var text = filter.block.nodes.map(function(node){ return node.val }).join('\\n');\n      filter.attrs = filter.attrs || {};\n      filter.attrs.filename = this.options.filename;\n      this.buffer(utils.text(fn(text, filter.attrs)));\n    }\n  },\n\n  /**\n   * Visit `text` node.\n   *\n   * @param {Text} text\n   * @api public\n   */\n\n  visitText: function(text){\n    text = utils.text(text.val.replace(/\\\\/g, '\\\\\\\\'));\n    if (this.escape) text = escape(text);\n    this.buffer(text);\n  },\n\n  /**\n   * Visit a `comment`, only buffering when the buffer flag is set.\n   *\n   * @param {Comment} comment\n   * @api public\n   */\n\n  visitComment: function(comment){\n    if (!comment.buffer) return;\n    if (this.pp) this.prettyIndent(1, true);\n    this.buffer('<!--' + utils.escape(comment.val) + '-->');\n  },\n\n  /**\n   * Visit a `BlockComment`.\n   *\n   * @param {Comment} comment\n   * @api public\n   */\n\n  visitBlockComment: function(comment){\n    if (!comment.buffer) return;\n    if (0 == comment.val.trim().indexOf('if')) {\n      this.buffer('<!--[' + comment.val.trim() + ']>');\n      this.visit(comment.block);\n      this.buffer('<![endif]-->');\n    } else {\n      this.buffer('<!--' + comment.val);\n      this.visit(comment.block);\n      this.buffer('-->');\n    }\n  },\n\n  /**\n   * Visit `code`, respecting buffer / escape flags.\n   * If the code is followed by a block, wrap it in\n   * a self-calling function.\n   *\n   * @param {Code} code\n   * @api public\n   */\n\n  visitCode: function(code){\n    // Wrap code blocks with {}.\n    // we only wrap unbuffered code blocks ATM\n    // since they are usually flow control\n\n    // Buffer code\n    if (code.buffer) {\n      var val = code.val.trimLeft();\n      this.buf.push('var __val__ = ' + val);\n      val = 'null == __val__ ? \"\" : __val__';\n      if (code.escape) val = 'escape(' + val + ')';\n      this.buf.push(\"buf.push(\" + val + \");\");\n    } else {\n      this.buf.push(code.val);\n    }\n\n    // Block support\n    if (code.block) {\n      if (!code.buffer) this.buf.push('{');\n      this.visit(code.block);\n      if (!code.buffer) this.buf.push('}');\n    }\n  },\n\n  /**\n   * Visit `each` block.\n   *\n   * @param {Each} each\n   * @api public\n   */\n\n  visitEach: function(each){\n    this.buf.push(''\n      + '// iterate ' + each.obj + '\\n'\n      + ';(function(){\\n'\n      + '  if (\\'number\\' == typeof ' + each.obj + '.length) {\\n'\n      + '    for (var ' + each.key + ' = 0, $$l = ' + each.obj + '.length; ' + each.key + ' < $$l; ' + each.key + '++) {\\n'\n      + '      var ' + each.val + ' = ' + each.obj + '[' + each.key + '];\\n');\n\n    this.visit(each.block);\n\n    this.buf.push(''\n      + '    }\\n'\n      + '  } else {\\n'\n      + '    for (var ' + each.key + ' in ' + each.obj + ') {\\n'\n      // if browser\n      // + '      if (' + each.obj + '.hasOwnProperty(' + each.key + ')){'\n      // end\n      + '      var ' + each.val + ' = ' + each.obj + '[' + each.key + '];\\n');\n\n    this.visit(each.block);\n\n    // if browser\n    // this.buf.push('      }\\n');\n    // end\n\n    this.buf.push('   }\\n  }\\n}).call(this);\\n');\n  },\n\n  /**\n   * Visit `attrs`.\n   *\n   * @param {Array} attrs\n   * @api public\n   */\n\n  visitAttributes: function(attrs){\n    var val = this.attrs(attrs);\n    if (val.inherits) {\n      this.buf.push(\"buf.push(attrs(merge({ \" + val.buf +\n          \" }, attributes), merge(\" + val.escaped + \", escaped, true)));\");\n    } else if (val.constant) {\n      eval('var buf={' + val.buf + '};');\n      this.buffer(runtime.attrs(buf, JSON.parse(val.escaped)), true);\n    } else {\n      this.buf.push(\"buf.push(attrs({ \" + val.buf + \" }, \" + val.escaped + \"));\");\n    }\n  },\n\n  /**\n   * Compile attributes.\n   */\n\n  attrs: function(attrs){\n    var buf = []\n      , classes = []\n      , escaped = {}\n      , constant = attrs.every(function(attr){ return isConstant(attr.val) })\n      , inherits = false;\n\n    if (this.terse) buf.push('terse: true');\n\n    attrs.forEach(function(attr){\n      if (attr.name == 'attributes') return inherits = true;\n      escaped[attr.name] = attr.escaped;\n      if (attr.name == 'class') {\n        classes.push('(' + attr.val + ')');\n      } else {\n        var pair = \"'\" + attr.name + \"':(\" + attr.val + ')';\n        buf.push(pair);\n      }\n    });\n\n    if (classes.length) {\n      classes = classes.join(\" + ' ' + \");\n      buf.push(\"class: \" + classes);\n    }\n\n    return {\n      buf: buf.join(', ').replace('class:', '\"class\":'),\n      escaped: JSON.stringify(escaped),\n      inherits: inherits,\n      constant: constant\n    };\n  }\n};\n\n/**\n * Check if expression can be evaluated to a constant\n *\n * @param {String} expression\n * @return {Boolean}\n * @api private\n */\n\nfunction isConstant(val){\n  // Check strings/literals\n  if (/^ *(\"([^\"\\\\]*(\\\\.[^\"\\\\]*)*)\"|'([^'\\\\]*(\\\\.[^'\\\\]*)*)'|true|false|null|undefined) *$/i.test(val))\n    return true;\n  \n  // Check numbers\n  if (!isNaN(Number(val)))\n    return true;\n  \n  // Check arrays\n  var matches;\n  if (matches = /^ *\\[(.*)\\] *$/.exec(val))\n    return matches[1].split(',').every(isConstant);\n  \n  return false;\n}\n\n/**\n * Escape the given string of `html`.\n *\n * @param {String} html\n * @return {String}\n * @api private\n */\n\nfunction escape(html){\n  return String(html)\n    .replace(/&(?!\\w+;)/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;');\n}"]}