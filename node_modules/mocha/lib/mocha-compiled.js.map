{"version":3,"sources":["mocha.js"],"names":[],"mappings":"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","file":"mocha-compiled.js","sourcesContent":["/*!\n * mocha\n * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nvar escapeRe = require('escape-string-regexp');\nvar path = require('path');\nvar reporters = require('./reporters');\nvar utils = require('./utils');\n\n/**\n * Expose `Mocha`.\n */\n\nexports = module.exports = Mocha;\n\n/**\n * To require local UIs and reporters when running in node.\n */\n\nif (!process.browser) {\n  var cwd = process.cwd();\n  module.paths.push(cwd, path.join(cwd, 'node_modules'));\n}\n\n/**\n * Expose internals.\n */\n\nexports.utils = utils;\nexports.interfaces = require('./interfaces');\nexports.reporters = reporters;\nexports.Runnable = require('./runnable');\nexports.Context = require('./context');\nexports.Runner = require('./runner');\nexports.Suite = require('./suite');\nexports.Hook = require('./hook');\nexports.Test = require('./test');\n\n/**\n * Return image `name` path.\n *\n * @api private\n * @param {string} name\n * @return {string}\n */\nfunction image(name) {\n  return path.join(__dirname, '../images', name + '.png');\n}\n\n/**\n * Set up mocha with `options`.\n *\n * Options:\n *\n *   - `ui` name \"bdd\", \"tdd\", \"exports\" etc\n *   - `reporter` reporter instance, defaults to `mocha.reporters.spec`\n *   - `globals` array of accepted globals\n *   - `timeout` timeout in milliseconds\n *   - `retries` number of times to retry failed tests\n *   - `bail` bail on the first test failure\n *   - `slow` milliseconds to wait before considering a test slow\n *   - `ignoreLeaks` ignore global leaks\n *   - `fullTrace` display the full stack-trace on failing\n *   - `grep` string or regexp to filter tests with\n *\n * @param {Object} options\n * @api public\n */\nfunction Mocha(options) {\n  options = options || {};\n  this.files = [];\n  this.options = options;\n  if (options.grep) {\n    this.grep(new RegExp(options.grep));\n  }\n  if (options.fgrep) {\n    this.grep(options.fgrep);\n  }\n  this.suite = new exports.Suite('', new exports.Context());\n  this.ui(options.ui);\n  this.bail(options.bail);\n  this.reporter(options.reporter, options.reporterOptions);\n  if (typeof options.timeout !== 'undefined' && options.timeout !== null) {\n    this.timeout(options.timeout);\n  }\n  if (typeof options.retries !== 'undefined' && options.retries !== null) {\n    this.retries(options.retries);\n  }\n  this.useColors(options.useColors);\n  if (options.enableTimeouts !== null) {\n    this.enableTimeouts(options.enableTimeouts);\n  }\n  if (options.slow) {\n    this.slow(options.slow);\n  }\n\n  this.suite.on('pre-require', function(context) {\n    exports.afterEach = context.afterEach || context.teardown;\n    exports.after = context.after || context.suiteTeardown;\n    exports.beforeEach = context.beforeEach || context.setup;\n    exports.before = context.before || context.suiteSetup;\n    exports.describe = context.describe || context.suite;\n    exports.it = context.it || context.test;\n    exports.setup = context.setup || context.beforeEach;\n    exports.suiteSetup = context.suiteSetup || context.before;\n    exports.suiteTeardown = context.suiteTeardown || context.after;\n    exports.suite = context.suite || context.describe;\n    exports.teardown = context.teardown || context.afterEach;\n    exports.test = context.test || context.it;\n    exports.run = context.run;\n  });\n}\n\n/**\n * Enable or disable bailing on the first failure.\n *\n * @api public\n * @param {boolean} [bail]\n */\nMocha.prototype.bail = function(bail) {\n  if (!arguments.length) {\n    bail = true;\n  }\n  this.suite.bail(bail);\n  return this;\n};\n\n/**\n * Add test `file`.\n *\n * @api public\n * @param {string} file\n */\nMocha.prototype.addFile = function(file) {\n  this.files.push(file);\n  return this;\n};\n\n/**\n * Set reporter to `reporter`, defaults to \"spec\".\n *\n * @param {String|Function} reporter name or constructor\n * @param {Object} reporterOptions optional options\n * @api public\n * @param {string|Function} reporter name or constructor\n * @param {Object} reporterOptions optional options\n */\nMocha.prototype.reporter = function(reporter, reporterOptions) {\n  if (typeof reporter === 'function') {\n    this._reporter = reporter;\n  } else {\n    reporter = reporter || 'spec';\n    var _reporter;\n    // Try to load a built-in reporter.\n    if (reporters[reporter]) {\n      _reporter = reporters[reporter];\n    }\n    // Try to load reporters from process.cwd() and node_modules\n    if (!_reporter) {\n      try {\n        _reporter = require(reporter);\n      } catch (err) {\n        err.message.indexOf('Cannot find module') !== -1\n          ? console.warn('\"' + reporter + '\" reporter not found')\n          : console.warn('\"' + reporter + '\" reporter blew up with error:\\n' + err.stack);\n      }\n    }\n    if (!_reporter && reporter === 'teamcity') {\n      console.warn('The Teamcity reporter was moved to a package named '\n        + 'mocha-teamcity-reporter '\n        + '(https://npmjs.org/package/mocha-teamcity-reporter).');\n    }\n    if (!_reporter) {\n      throw new Error('invalid reporter \"' + reporter + '\"');\n    }\n    this._reporter = _reporter;\n  }\n  this.options.reporterOptions = reporterOptions;\n  return this;\n};\n\n/**\n * Set test UI `name`, defaults to \"bdd\".\n *\n * @api public\n * @param {string} bdd\n */\nMocha.prototype.ui = function(name) {\n  name = name || 'bdd';\n  this._ui = exports.interfaces[name];\n  if (!this._ui) {\n    try {\n      this._ui = require(name);\n    } catch (err) {\n      throw new Error('invalid interface \"' + name + '\"');\n    }\n  }\n  this._ui = this._ui(this.suite);\n  return this;\n};\n\n/**\n * Load registered files.\n *\n * @api private\n */\nMocha.prototype.loadFiles = function(fn) {\n  var self = this;\n  var suite = this.suite;\n  this.files.forEach(function(file) {\n    file = path.resolve(file);\n    suite.emit('pre-require', global, file, self);\n    suite.emit('require', require(file), file, self);\n    suite.emit('post-require', global, file, self);\n  });\n  fn && fn();\n};\n\n/**\n * Enable growl support.\n *\n * @api private\n */\nMocha.prototype._growl = function(runner, reporter) {\n  var notify = require('growl');\n\n  runner.on('end', function() {\n    var stats = reporter.stats;\n    if (stats.failures) {\n      var msg = stats.failures + ' of ' + runner.total + ' tests failed';\n      notify(msg, { name: 'mocha', title: 'Failed', image: image('error') });\n    } else {\n      notify(stats.passes + ' tests passed in ' + stats.duration + 'ms', {\n        name: 'mocha',\n        title: 'Passed',\n        image: image('ok')\n      });\n    }\n  });\n};\n\n/**\n * Add regexp to grep, if `re` is a string it is escaped.\n *\n * @param {RegExp|String} re\n * @return {Mocha}\n * @api public\n * @param {RegExp|string} re\n * @return {Mocha}\n */\nMocha.prototype.grep = function(re) {\n  this.options.grep = typeof re === 'string' ? new RegExp(escapeRe(re)) : re;\n  return this;\n};\n\n/**\n * Invert `.grep()` matches.\n *\n * @return {Mocha}\n * @api public\n */\nMocha.prototype.invert = function() {\n  this.options.invert = true;\n  return this;\n};\n\n/**\n * Ignore global leaks.\n *\n * @param {Boolean} ignore\n * @return {Mocha}\n * @api public\n * @param {boolean} ignore\n * @return {Mocha}\n */\nMocha.prototype.ignoreLeaks = function(ignore) {\n  this.options.ignoreLeaks = Boolean(ignore);\n  return this;\n};\n\n/**\n * Enable global leak checking.\n *\n * @return {Mocha}\n * @api public\n */\nMocha.prototype.checkLeaks = function() {\n  this.options.ignoreLeaks = false;\n  return this;\n};\n\n/**\n * Display long stack-trace on failing\n *\n * @return {Mocha}\n * @api public\n */\nMocha.prototype.fullTrace = function() {\n  this.options.fullStackTrace = true;\n  return this;\n};\n\n/**\n * Enable growl support.\n *\n * @return {Mocha}\n * @api public\n */\nMocha.prototype.growl = function() {\n  this.options.growl = true;\n  return this;\n};\n\n/**\n * Ignore `globals` array or string.\n *\n * @param {Array|String} globals\n * @return {Mocha}\n * @api public\n * @param {Array|string} globals\n * @return {Mocha}\n */\nMocha.prototype.globals = function(globals) {\n  this.options.globals = (this.options.globals || []).concat(globals);\n  return this;\n};\n\n/**\n * Emit color output.\n *\n * @param {Boolean} colors\n * @return {Mocha}\n * @api public\n * @param {boolean} colors\n * @return {Mocha}\n */\nMocha.prototype.useColors = function(colors) {\n  if (colors !== undefined) {\n    this.options.useColors = colors;\n  }\n  return this;\n};\n\n/**\n * Use inline diffs rather than +/-.\n *\n * @param {Boolean} inlineDiffs\n * @return {Mocha}\n * @api public\n * @param {boolean} inlineDiffs\n * @return {Mocha}\n */\nMocha.prototype.useInlineDiffs = function(inlineDiffs) {\n  this.options.useInlineDiffs = inlineDiffs !== undefined && inlineDiffs;\n  return this;\n};\n\n/**\n * Set the timeout in milliseconds.\n *\n * @param {Number} timeout\n * @return {Mocha}\n * @api public\n * @param {number} timeout\n * @return {Mocha}\n */\nMocha.prototype.timeout = function(timeout) {\n  this.suite.timeout(timeout);\n  return this;\n};\n\n/**\n * Set the number of times to retry failed tests.\n *\n * @param {Number} retry times\n * @return {Mocha}\n * @api public\n */\nMocha.prototype.retries = function(n) {\n  this.suite.retries(n);\n  return this;\n};\n\n/**\n * Set slowness threshold in milliseconds.\n *\n * @param {Number} slow\n * @return {Mocha}\n * @api public\n * @param {number} slow\n * @return {Mocha}\n */\nMocha.prototype.slow = function(slow) {\n  this.suite.slow(slow);\n  return this;\n};\n\n/**\n * Enable timeouts.\n *\n * @param {Boolean} enabled\n * @return {Mocha}\n * @api public\n * @param {boolean} enabled\n * @return {Mocha}\n */\nMocha.prototype.enableTimeouts = function(enabled) {\n  this.suite.enableTimeouts(arguments.length && enabled !== undefined ? enabled : true);\n  return this;\n};\n\n/**\n * Makes all tests async (accepting a callback)\n *\n * @return {Mocha}\n * @api public\n */\nMocha.prototype.asyncOnly = function() {\n  this.options.asyncOnly = true;\n  return this;\n};\n\n/**\n * Disable syntax highlighting (in browser).\n *\n * @api public\n */\nMocha.prototype.noHighlighting = function() {\n  this.options.noHighlighting = true;\n  return this;\n};\n\n/**\n * Enable uncaught errors to propagate (in browser).\n *\n * @return {Mocha}\n * @api public\n */\nMocha.prototype.allowUncaught = function() {\n  this.options.allowUncaught = true;\n  return this;\n};\n\n/**\n * Delay root suite execution.\n * @returns {Mocha}\n */\nMocha.prototype.delay = function delay() {\n  this.options.delay = true;\n  return this;\n};\n\n/**\n * Run tests and invoke `fn()` when complete.\n *\n * @api public\n * @param {Function} fn\n * @return {Runner}\n */\nMocha.prototype.run = function(fn) {\n  if (this.files.length) {\n    this.loadFiles();\n  }\n  var suite = this.suite;\n  var options = this.options;\n  options.files = this.files;\n  var runner = new exports.Runner(suite, options.delay);\n  var reporter = new this._reporter(runner, options);\n  runner.ignoreLeaks = options.ignoreLeaks !== false;\n  runner.fullStackTrace = options.fullStackTrace;\n  runner.asyncOnly = options.asyncOnly;\n  runner.allowUncaught = options.allowUncaught;\n  if (options.grep) {\n    runner.grep(options.grep, options.invert);\n  }\n  if (options.globals) {\n    runner.globals(options.globals);\n  }\n  if (options.growl) {\n    this._growl(runner, reporter);\n  }\n  if (options.useColors !== undefined) {\n    exports.reporters.Base.useColors = options.useColors;\n  }\n  exports.reporters.Base.inlineDiffs = options.useInlineDiffs;\n\n  function done(failures) {\n    if (reporter.done) {\n      reporter.done(failures, fn);\n    } else {\n      fn && fn(failures);\n    }\n  }\n\n  return runner.run(done);\n};\n"]}