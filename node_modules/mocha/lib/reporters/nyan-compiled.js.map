{"version":3,"sources":["nyan.js"],"names":[],"mappings":"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","file":"nyan-compiled.js","sourcesContent":["/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\nvar inherits = require('../utils').inherits;\n\n/**\n * Expose `Dot`.\n */\n\nexports = module.exports = NyanCat;\n\n/**\n * Initialize a new `Dot` matrix test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction NyanCat(runner) {\n  Base.call(this, runner);\n\n  var self = this;\n  var width = Base.window.width * .75 | 0;\n  var nyanCatWidth = this.nyanCatWidth = 11;\n\n  this.colorIndex = 0;\n  this.numberOfLines = 4;\n  this.rainbowColors = self.generateColors();\n  this.scoreboardWidth = 5;\n  this.tick = 0;\n  this.trajectories = [[], [], [], []];\n  this.trajectoryWidthMax = (width - nyanCatWidth);\n\n  runner.on('start', function() {\n    Base.cursor.hide();\n    self.draw();\n  });\n\n  runner.on('pending', function() {\n    self.draw();\n  });\n\n  runner.on('pass', function() {\n    self.draw();\n  });\n\n  runner.on('fail', function() {\n    self.draw();\n  });\n\n  runner.on('end', function() {\n    Base.cursor.show();\n    for (var i = 0; i < self.numberOfLines; i++) {\n      write('\\n');\n    }\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\ninherits(NyanCat, Base);\n\n/**\n * Draw the nyan cat\n *\n * @api private\n */\n\nNyanCat.prototype.draw = function() {\n  this.appendRainbow();\n  this.drawScoreboard();\n  this.drawRainbow();\n  this.drawNyanCat();\n  this.tick = !this.tick;\n};\n\n/**\n * Draw the \"scoreboard\" showing the number\n * of passes, failures and pending tests.\n *\n * @api private\n */\n\nNyanCat.prototype.drawScoreboard = function() {\n  var stats = this.stats;\n\n  function draw(type, n) {\n    write(' ');\n    write(Base.color(type, n));\n    write('\\n');\n  }\n\n  draw('green', stats.passes);\n  draw('fail', stats.failures);\n  draw('pending', stats.pending);\n  write('\\n');\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Append the rainbow.\n *\n * @api private\n */\n\nNyanCat.prototype.appendRainbow = function() {\n  var segment = this.tick ? '_' : '-';\n  var rainbowified = this.rainbowify(segment);\n\n  for (var index = 0; index < this.numberOfLines; index++) {\n    var trajectory = this.trajectories[index];\n    if (trajectory.length >= this.trajectoryWidthMax) {\n      trajectory.shift();\n    }\n    trajectory.push(rainbowified);\n  }\n};\n\n/**\n * Draw the rainbow.\n *\n * @api private\n */\n\nNyanCat.prototype.drawRainbow = function() {\n  var self = this;\n\n  this.trajectories.forEach(function(line) {\n    write('\\u001b[' + self.scoreboardWidth + 'C');\n    write(line.join(''));\n    write('\\n');\n  });\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Draw the nyan cat\n *\n * @api private\n */\nNyanCat.prototype.drawNyanCat = function() {\n  var self = this;\n  var startWidth = this.scoreboardWidth + this.trajectories[0].length;\n  var dist = '\\u001b[' + startWidth + 'C';\n  var padding = '';\n\n  write(dist);\n  write('_,------,');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? '  ' : '   ';\n  write('_|' + padding + '/\\\\_/\\\\ ');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? '_' : '__';\n  var tail = self.tick ? '~' : '^';\n  write(tail + '|' + padding + this.face() + ' ');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? ' ' : '  ';\n  write(padding + '\"\"  \"\" ');\n  write('\\n');\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Draw nyan cat face.\n *\n * @api private\n * @return {string}\n */\n\nNyanCat.prototype.face = function() {\n  var stats = this.stats;\n  if (stats.failures) {\n    return '( x .x)';\n  } else if (stats.pending) {\n    return '( o .o)';\n  } else if (stats.passes) {\n    return '( ^ .^)';\n  }\n  return '( - .-)';\n};\n\n/**\n * Move cursor up `n`.\n *\n * @api private\n * @param {number} n\n */\n\nNyanCat.prototype.cursorUp = function(n) {\n  write('\\u001b[' + n + 'A');\n};\n\n/**\n * Move cursor down `n`.\n *\n * @api private\n * @param {number} n\n */\n\nNyanCat.prototype.cursorDown = function(n) {\n  write('\\u001b[' + n + 'B');\n};\n\n/**\n * Generate rainbow colors.\n *\n * @api private\n * @return {Array}\n */\nNyanCat.prototype.generateColors = function() {\n  var colors = [];\n\n  for (var i = 0; i < (6 * 7); i++) {\n    var pi3 = Math.floor(Math.PI / 3);\n    var n = (i * (1.0 / 6));\n    var r = Math.floor(3 * Math.sin(n) + 3);\n    var g = Math.floor(3 * Math.sin(n + 2 * pi3) + 3);\n    var b = Math.floor(3 * Math.sin(n + 4 * pi3) + 3);\n    colors.push(36 * r + 6 * g + b + 16);\n  }\n\n  return colors;\n};\n\n/**\n * Apply rainbow to the given `str`.\n *\n * @api private\n * @param {string} str\n * @return {string}\n */\nNyanCat.prototype.rainbowify = function(str) {\n  if (!Base.useColors) {\n    return str;\n  }\n  var color = this.rainbowColors[this.colorIndex % this.rainbowColors.length];\n  this.colorIndex += 1;\n  return '\\u001b[38;5;' + color + 'm' + str + '\\u001b[0m';\n};\n\n/**\n * Stdout helper.\n *\n * @param {string} string A message to write to stdout.\n */\nfunction write(string) {\n  process.stdout.write(string);\n}\n"]}