{"version":3,"sources":["landing.js"],"names":[],"mappings":";;;;AAIA,IAAI,OAAO,QAAQ,QAAR,CAAX;AACA,IAAI,WAAW,QAAQ,UAAR,EAAoB,QAAnC;AACA,IAAI,SAAS,KAAK,MAAlB;AACA,IAAI,QAAQ,KAAK,KAAjB;;;;;;AAMA,UAAU,OAAO,OAAP,GAAiB,OAA3B;;;;;;AAMA,KAAK,MAAL,CAAY,KAAZ,GAAoB,CAApB;;;;;;AAMA,KAAK,MAAL,CAAY,aAAZ,IAA6B,EAA7B;;;;;;AAMA,KAAK,MAAL,CAAY,MAAZ,GAAqB,EAArB;;;;;;;;AAQA,SAAS,OAAT,CAAiB,MAAjB,EAAyB;AACvB,OAAK,IAAL,CAAU,IAAV,EAAgB,MAAhB;;AAEA,MAAI,OAAO,IAAX;AACA,MAAI,QAAQ,KAAK,MAAL,CAAY,KAAZ,GAAoB,GAApB,GAA0B,CAAtC;AACA,MAAI,QAAQ,OAAO,KAAnB;AACA,MAAI,SAAS,QAAQ,MAArB;AACA,MAAI,QAAQ,MAAM,OAAN,EAAe,GAAf,CAAZ;AACA,MAAI,UAAU,CAAC,CAAf;AACA,MAAI,IAAI,CAAR;;AAEA,WAAS,MAAT,GAAkB;AAChB,QAAI,MAAM,MAAM,KAAN,EAAa,IAAb,CAAkB,GAAlB,CAAV;AACA,WAAO,OAAO,MAAM,QAAN,EAAgB,GAAhB,CAAd;AACD;;AAED,SAAO,EAAP,CAAU,OAAV,EAAmB,YAAW;AAC5B,WAAO,KAAP,CAAa,UAAb;AACA,WAAO,IAAP;AACD,GAHD;;AAKA,SAAO,EAAP,CAAU,UAAV,EAAsB,UAAS,IAAT,EAAe;;AAEnC,QAAI,MAAM,YAAY,CAAC,CAAb,GAAiB,QAAQ,EAAE,CAAV,GAAc,KAAd,GAAsB,CAAvC,GAA2C,OAArD;;;AAGA,QAAI,KAAK,KAAL,KAAe,QAAnB,EAA6B;AAC3B,cAAQ,MAAM,aAAN,EAAqB,GAArB,CAAR;AACA,gBAAU,GAAV;AACD;;;AAGD,WAAO,KAAP,CAAa,aAAa,QAAQ,CAArB,IAA0B,YAAvC;AACA,WAAO,KAAP,CAAa,QAAb;AACA,WAAO,KAAP,CAAa,MAAb;AACA,WAAO,KAAP,CAAa,MAAM,QAAN,EAAgB,MAAM,GAAN,EAAW,IAAX,CAAgB,GAAhB,CAAhB,CAAb;AACA,WAAO,KAAP,CAAa,KAAb;AACA,WAAO,KAAP,CAAa,MAAM,QAAN,EAAgB,MAAM,QAAQ,GAAd,EAAmB,IAAnB,CAAwB,GAAxB,IAA+B,IAA/C,CAAb;AACA,WAAO,KAAP,CAAa,QAAb;AACA,WAAO,KAAP,CAAa,WAAb;AACD,GAnBD;;AAqBA,SAAO,EAAP,CAAU,KAAV,EAAiB,YAAW;AAC1B,WAAO,IAAP;AACA,YAAQ,GAAR;AACA,SAAK,QAAL;AACD,GAJD;AAKD;;;;;AAKD,SAAS,OAAT,EAAkB,IAAlB","file":"landing-compiled.js","sourcesContent":["/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\nvar inherits = require('../utils').inherits;\nvar cursor = Base.cursor;\nvar color = Base.color;\n\n/**\n * Expose `Landing`.\n */\n\nexports = module.exports = Landing;\n\n/**\n * Airplane color.\n */\n\nBase.colors.plane = 0;\n\n/**\n * Airplane crash color.\n */\n\nBase.colors['plane crash'] = 31;\n\n/**\n * Runway color.\n */\n\nBase.colors.runway = 90;\n\n/**\n * Initialize a new `Landing` reporter.\n *\n * @api public\n * @param {Runner} runner\n */\nfunction Landing(runner) {\n  Base.call(this, runner);\n\n  var self = this;\n  var width = Base.window.width * .75 | 0;\n  var total = runner.total;\n  var stream = process.stdout;\n  var plane = color('plane', '✈');\n  var crashed = -1;\n  var n = 0;\n\n  function runway() {\n    var buf = Array(width).join('-');\n    return '  ' + color('runway', buf);\n  }\n\n  runner.on('start', function() {\n    stream.write('\\n\\n\\n  ');\n    cursor.hide();\n  });\n\n  runner.on('test end', function(test) {\n    // check if the plane crashed\n    var col = crashed === -1 ? width * ++n / total | 0 : crashed;\n\n    // show the crash\n    if (test.state === 'failed') {\n      plane = color('plane crash', '✈');\n      crashed = col;\n    }\n\n    // render landing strip\n    stream.write('\\u001b[' + (width + 1) + 'D\\u001b[2A');\n    stream.write(runway());\n    stream.write('\\n  ');\n    stream.write(color('runway', Array(col).join('⋅')));\n    stream.write(plane);\n    stream.write(color('runway', Array(width - col).join('⋅') + '\\n'));\n    stream.write(runway());\n    stream.write('\\u001b[0m');\n  });\n\n  runner.on('end', function() {\n    cursor.show();\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\ninherits(Landing, Base);\n"]}