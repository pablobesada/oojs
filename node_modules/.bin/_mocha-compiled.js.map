{"version":3,"sources":["_mocha"],"names":[],"mappings":"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","file":"_mocha-compiled.js","sourcesContent":["#!/usr/bin/env node\n\n/**\n * Module dependencies.\n */\n\nvar program = require('commander'),\n  path = require('path'),\n  fs = require('fs'),\n  resolve = path.resolve,\n  exists = fs.existsSync || path.existsSync,\n  Mocha = require('../'),\n  utils = Mocha.utils,\n  join = path.join,\n  cwd = process.cwd(),\n  getOptions = require('./options'),\n  mocha = new Mocha;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Files.\n */\n\nvar files = [];\n\n/**\n * Globals.\n */\n\nvar globals = [];\n\n/**\n * Requires.\n */\n\nvar requires = [];\n\n/**\n * Images.\n */\n\nvar images = {\n    fail: __dirname + '/../images/error.png'\n  , pass: __dirname + '/../images/ok.png'\n};\n\n// options\n\nprogram\n  .version(JSON.parse(fs.readFileSync(__dirname + '/../package.json', 'utf8')).version)\n  .usage('[debug] [options] [files]')\n  .option('-A, --async-only', \"force all tests to take a callback (async) or return a promise\")\n  .option('-c, --colors', 'force enabling of colors')\n  .option('-C, --no-colors', 'force disabling of colors')\n  .option('-G, --growl', 'enable growl notification support')\n  .option('-O, --reporter-options <k=v,k2=v2,...>', 'reporter-specific options')\n  .option('-R, --reporter <name>', 'specify the reporter to use', 'spec')\n  .option('-S, --sort', \"sort test files\")\n  .option('-b, --bail', \"bail after first test failure\")\n  .option('-d, --debug', \"enable node's debugger, synonym for node --debug\")\n  .option('-g, --grep <pattern>', 'only run tests matching <pattern>')\n  .option('-f, --fgrep <string>', 'only run tests containing <string>')\n  .option('-gc, --expose-gc', 'expose gc extension')\n  .option('-i, --invert', 'inverts --grep and --fgrep matches')\n  .option('-r, --require <name>', 'require the given module')\n  .option('-s, --slow <ms>', '\"slow\" test threshold in milliseconds [75]')\n  .option('-t, --timeout <ms>', 'set test-case timeout in milliseconds [2000]')\n  .option('-u, --ui <name>', 'specify user-interface (bdd|tdd|exports)', 'bdd')\n  .option('-w, --watch', 'watch files for changes')\n  .option('--check-leaks', 'check for global variable leaks')\n  .option('--full-trace', 'display the full stack trace')\n  .option('--compilers <ext>:<module>,...', 'use the given module(s) to compile files', list, [])\n  .option('--debug-brk', \"enable node's debugger breaking on the first line\")\n  .option('--globals <names>', 'allow the given comma-delimited global [names]', list, [])\n  .option('--es_staging', 'enable all staged features')\n  .option('--harmony<_classes,_generators,...>', 'all node --harmony* flags are available')\n  .option('--inline-diffs', 'display actual/expected differences inline within each string')\n  .option('--interfaces', 'display available interfaces')\n  .option('--no-deprecation', 'silence deprecation warnings')\n  .option('--no-exit', 'require a clean shutdown of the event loop: mocha will not call process.exit')\n  .option('--no-timeouts', 'disables timeouts, given implicitly with --debug')\n  .option('--opts <path>', 'specify opts path', 'test/mocha.opts')\n  .option('--perf-basic-prof', 'enable perf linux profiler (basic support)')\n  .option('--prof', 'log statistical profiling information')\n  .option('--log-timer-events', 'Time events including external callbacks')\n  .option('--recursive', 'include sub directories')\n  .option('--reporters', 'display available reporters')\n  .option('--retries <times>', 'set numbers of time to retry a failed test case')\n  .option('--throw-deprecation', 'throw an exception anytime a deprecated function is used')\n  .option('--trace', 'trace function calls')\n  .option('--trace-deprecation', 'show stack traces on deprecations')\n  .option('--use_strict', 'enforce strict mode')\n  .option('--watch-extensions <ext>,...', 'additional extensions to monitor with --watch', list, [])\n  .option('--delay', 'wait for async suite definition')\n\nprogram.name = 'mocha';\n\n// init command\n\nprogram\n  .command('init <path>')\n  .description('initialize a client-side mocha setup at <path>')\n  .action(function(path){\n    var mkdir = require('mkdirp');\n    mkdir.sync(path);\n    var css = fs.readFileSync(join(__dirname, '..', 'mocha.css'));\n    var js = fs.readFileSync(join(__dirname, '..', 'mocha.js'));\n    var tmpl = fs.readFileSync(join(__dirname, '..', 'lib/template.html'));\n    fs.writeFileSync(join(path, 'mocha.css'), css);\n    fs.writeFileSync(join(path, 'mocha.js'), js);\n    fs.writeFileSync(join(path, 'tests.js'), '');\n    fs.writeFileSync(join(path, 'index.html'), tmpl);\n    process.exit(0);\n  });\n\n// --globals\n\nprogram.on('globals', function(val){\n  globals = globals.concat(list(val));\n});\n\n// --reporters\n\nprogram.on('reporters', function(){\n  console.log();\n  console.log('    dot - dot matrix');\n  console.log('    doc - html documentation');\n  console.log('    spec - hierarchical spec list');\n  console.log('    json - single json object');\n  console.log('    progress - progress bar');\n  console.log('    list - spec-style listing');\n  console.log('    tap - test-anything-protocol');\n  console.log('    landing - unicode landing strip');\n  console.log('    xunit - xunit reporter');\n  console.log('    html-cov - HTML test coverage');\n  console.log('    json-cov - JSON test coverage');\n  console.log('    min - minimal reporter (great with --watch)');\n  console.log('    json-stream - newline delimited json events');\n  console.log('    markdown - markdown documentation (github flavour)');\n  console.log('    nyan - nyan cat!');\n  console.log();\n  process.exit();\n});\n\n// --interfaces\n\nprogram.on('interfaces', function(){\n  console.log('');\n  console.log('    bdd');\n  console.log('    tdd');\n  console.log('    qunit');\n  console.log('    exports');\n  console.log('');\n  process.exit();\n});\n\n// -r, --require\n\nmodule.paths.push(cwd, join(cwd, 'node_modules'));\n\nprogram.on('require', function(mod){\n  var abs = exists(mod) || exists(mod + '.js');\n  if (abs) mod = resolve(mod);\n  requires.push(mod);\n});\n\n// If not already done, load mocha.opts\nif (!process.env.LOADED_MOCHA_OPTS) {\n  getOptions();\n}\n\n// parse args\n\nprogram.parse(process.argv);\n\n// infinite stack traces\n\nError.stackTraceLimit = Infinity; // TODO: config\n\n// reporter options\n\nvar reporterOptions = {};\nif (program.reporterOptions !== undefined) {\n    program.reporterOptions.split(\",\").forEach(function(opt) {\n        var L = opt.split(\"=\");\n        if (L.length > 2 || L.length === 0) {\n            throw new Error(\"invalid reporter option '\" + opt + \"'\");\n        } else if (L.length === 2) {\n            reporterOptions[L[0]] = L[1];\n        } else {\n            reporterOptions[L[0]] = true;\n        }\n    });\n}\n\n// reporter\n\nmocha.reporter(program.reporter, reporterOptions);\n\n// load reporter\n\nvar Reporter = null;\ntry {\n  Reporter = require('../lib/reporters/' + program.reporter);\n} catch (err) {\n  try {\n    Reporter = require(program.reporter);\n  } catch (err) {\n    throw new Error('reporter \"' + program.reporter + '\" does not exist');\n  }\n}\n\n// --no-colors\n\nif (!program.colors) mocha.useColors(false);\n\n// --colors\n\nif (~process.argv.indexOf('--colors') ||\n    ~process.argv.indexOf('-c')) {\n  mocha.useColors(true);\n}\n\n// --inline-diffs\n\nif (program.inlineDiffs) mocha.useInlineDiffs(true);\n\n// --slow <ms>\n\nif (program.slow) mocha.suite.slow(program.slow);\n\n// --no-timeouts\n\nif (!program.timeouts) mocha.enableTimeouts(false);\n\n// --timeout\n\nif (program.timeout) mocha.suite.timeout(program.timeout);\n\n// --bail\n\nmocha.suite.bail(program.bail);\n\n// --grep\n\nif (program.grep) mocha.grep(new RegExp(program.grep));\n\n// --fgrep\n\nif (program.fgrep) mocha.grep(program.fgrep);\n\n// --invert\n\nif (program.invert) mocha.invert();\n\n// --check-leaks\n\nif (program.checkLeaks) mocha.checkLeaks();\n\n// --stack-trace\n\nif(program.fullTrace) mocha.fullTrace();\n\n// --growl\n\nif (program.growl) mocha.growl();\n\n// --async-only\n\nif (program.asyncOnly) mocha.asyncOnly();\n\n// --delay\n\nif (program.delay) mocha.delay();\n\n// --globals\n\nmocha.globals(globals);\n\n// --retries\n\nif (program.retries) mocha.suite.retries(program.retries);\n\n// custom compiler support\n\nvar extensions = ['js'];\nprogram.compilers.forEach(function(c) {\n  var compiler = c.split(':')\n    , ext = compiler[0]\n    , mod = compiler[1];\n\n  if (mod[0] == '.') mod = join(process.cwd(), mod);\n  require(mod);\n  extensions.push(ext);\n  program.watchExtensions.push(ext);\n});\n\n// requires\n\nrequires.forEach(function(mod) {\n  require(mod);\n});\n\n// interface\n\nmocha.ui(program.ui);\n\n//args\n\nvar args = program.args;\n\n// default files to test/*.{js,coffee}\n\nif (!args.length) args.push('test');\n\nargs.forEach(function(arg){\n  files = files.concat(utils.lookupFiles(arg, extensions, program.recursive));\n});\n\n// resolve\n\nfiles = files.map(function(path){\n  return resolve(path);\n});\n\nif (program.sort) {\n  files.sort();\n}\n\n// --watch\n\nvar runner;\nif (program.watch) {\n  console.log();\n  hideCursor();\n  process.on('SIGINT', function(){\n    showCursor();\n    console.log('\\n');\n    process.exit();\n  });\n\n\n  var watchFiles = utils.files(cwd, [ 'js' ].concat(program.watchExtensions));\n  var runAgain = false;\n\n  function loadAndRun() {\n    try {\n      mocha.files = files;\n      runAgain = false;\n      runner = mocha.run(function(){\n        runner = null;\n        if (runAgain) {\n          rerun();\n        }\n      });\n    } catch(e) {\n      console.log(e.stack);\n    }\n  }\n\n  function purge() {\n    watchFiles.forEach(function(file){\n      delete require.cache[file];\n    });\n  }\n\n  loadAndRun();\n\n  function rerun() {\n    purge();\n    stop()\n    if (!program.grep)\n      mocha.grep(null);\n    mocha.suite = mocha.suite.clone();\n    mocha.suite.ctx = new Mocha.Context;\n    mocha.ui(program.ui);\n    loadAndRun();\n  }\n\n  utils.watch(watchFiles, function(){\n    runAgain = true;\n    if (runner) {\n      runner.abort();\n    } else {\n      rerun();\n    }\n  });\n\n} else {\n\n// load\n\n  mocha.files = files;\n  runner = mocha.run(program.exit ? exit : exitLater);\n\n}\n\nfunction exitLater(code) {\n  process.on('exit', function() { process.exit(code) })\n}\n\nfunction exit(code) {\n  // flush output for Node.js Windows pipe bug\n  // https://github.com/joyent/node/issues/6247 is just one bug example\n  // https://github.com/visionmedia/mocha/issues/333 has a good discussion\n  function done() {\n    if (!(draining--)) process.exit(code);\n  }\n\n  var draining = 0;\n  var streams = [process.stdout, process.stderr];\n\n  streams.forEach(function(stream){\n    // submit empty write request and wait for completion\n    draining += 1;\n    stream.write('', done);\n  });\n\n  done();\n}\n\nprocess.on('SIGINT', function() { runner.abort(); })\n\n// enable growl notifications\n\nfunction growl(runner, reporter) {\n  var notify = require('growl');\n\n  runner.on('end', function(){\n    var stats = reporter.stats;\n    if (stats.failures) {\n      var msg = stats.failures + ' of ' + runner.total + ' tests failed';\n      notify(msg, { name: 'mocha', title: 'Failed', image: images.fail });\n    } else {\n      notify(stats.passes + ' tests passed in ' + stats.duration + 'ms', {\n          name: 'mocha'\n        , title: 'Passed'\n        , image: images.pass\n      });\n    }\n  });\n}\n\n/**\n * Parse list.\n */\n\nfunction list(str) {\n  return str.split(/ *, */);\n}\n\n/**\n * Hide the cursor.\n */\n\nfunction hideCursor(){\n  process.stdout.write('\\u001b[?25l');\n}\n\n/**\n * Show the cursor.\n */\n\nfunction showCursor(){\n  process.stdout.write('\\u001b[?25h');\n}\n\n/**\n * Stop play()ing.\n */\n\nfunction stop() {\n  process.stdout.write('\\u001b[2K');\n  clearInterval(play.timer);\n}\n\n/**\n * Play the given array of strings.\n */\n\nfunction play(arr, interval) {\n  var len = arr.length\n    , interval = interval || 100\n    , i = 0;\n\n  play.timer = setInterval(function(){\n    var str = arr[i++ % len];\n    process.stdout.write('\\u001b[0G' + str);\n  }, interval);\n}\n"]}